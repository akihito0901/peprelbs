<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PepLab (繝壹・繝ｩ繝・ - 諢帷堪縺ｨ縺ｮ證ｮ繧峨＠繧偵√ｂ縺｣縺ｨ鄒弱＠縺上・/title>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Firebase SDK (v8 Compat for CDN usage without build step) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script>
        // --- FIREBASE CONFIGURATION (REPLACE WITH YOUR KEYS) ---
        const firebaseConfig = {
            apiKey: "AIzaSyDs1z1ZYTb7ISy-uGnxHQV0yqm2vrQBCw8",
            authDomain: "pepre-app.firebaseapp.com",
            projectId: "pepre-app",
            storageBucket: "pepre-app.firebasestorage.app",
            messagingSenderId: "211917167439",
            appId: "1:211917167439:web:5bf9dfdde895e8fb46833a"
        };
        // Initialize Firebase
        if (typeof firebase !== 'undefined') {
            try {
                firebase.initializeApp(firebaseConfig);
                console.log("Firebase initialized");
            } catch (e) {
                console.warn("Firebase Init Error (Keys missing?):", e);
            }
        }
        // Initialize Firestore
        const db = typeof firebase !== 'undefined' ? firebase.firestore() : null;
    </script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Shippori Mincho for elegance, Zen Maru Gothic for rounded softness -->
    <link
        href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;700&family=Zen+Maru+Gothic:wght@300;400;500;700&display=swap"
        rel="stylesheet">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        theme: {
                            base: '#FFFBF5',      // Warm White
                            text: '#4A4238',      // Warm Dark Gray
                            primary: '#E5B5A8',   // Dusty Pink (Main Accent)
                            secondary: '#A8C8BA', // Sage Green (Health/Healing)
                            accent: '#DBC1AC',    // Sand/Greige (Neutral Accent)
                            surface: '#FFFFFF',   // Pure White
                            muted: '#F2EBE5'      // Muted background
                        }
                    },
                    fontFamily: {
                        sans: ['Zen Maru Gothic', 'sans-serif'],
                        serif: ['Shippori Mincho', 'serif'],
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(229, 181, 168, 0.15)',
                        'float': '0 10px 30px -5px rgba(74, 66, 56, 0.05)',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #FFFBF5;
            color: #4A4238;
            -webkit-tap-highlight-color: transparent;
        }

        .font-serif {
            font-family: 'Shippori Mincho', serif;
        }

        .font-sans {
            font-family: 'Zen Maru Gothic', sans-serif;
        }

        .fade-in {
            animation: fadeIn 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
            opacity: 0;
            transform: translateY(10px);
        }

        .fade-in-delay-1 {
            animation-delay: 0.1s;
        }

        .fade-in-delay-2 {
            animation-delay: 0.2s;
        }

        .fade-in-delay-3 {
            animation-delay: 0.3s;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hide scrollbar */
        .hide-scroll::-webkit-scrollbar {
            display: none;
        }

        .hide-scroll {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Custom styling for inputs */
        .input-underline {
            background: transparent;
            border-bottom: 1px solid #DBC1AC;
            transition: all 0.3s ease;
        }

        .input-underline:focus {
            border-color: #E5B5A8;
            outline: none;
        }
    </style>
</head>

<body class="bg-theme-base text-theme-text font-sans antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- ICONS (Thin & Elegant) ---
        const IconHome = ({ active }) => <svg xmlns="http://www.w3.org/2000/svg" fill={active ? "currentColor" : "none"} viewBox="0 0 24 24" strokeWidth={1} stroke="currentColor" className="w-6 h-6"><path strokeLinecap="round" strokeLinejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" /></svg>;
        const IconRecord = ({ active }) => <svg xmlns="http://www.w3.org/2000/svg" fill={active ? "currentColor" : "none"} viewBox="0 0 24 24" strokeWidth={1} stroke="currentColor" className="w-6 h-6"><path strokeLinecap="round" strokeLinejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" /></svg>;
        const IconEvent = ({ active }) => <svg xmlns="http://www.w3.org/2000/svg" fill={active ? "currentColor" : "none"} viewBox="0 0 24 24" strokeWidth={1} stroke="currentColor" className="w-6 h-6"><path strokeLinecap="round" strokeLinejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z" /></svg>;
        const IconLost = ({ active }) => <svg xmlns="http://www.w3.org/2000/svg" fill={active ? "currentColor" : "none"} viewBox="0 0 24 24" strokeWidth={1} stroke="currentColor" className="w-6 h-6"><path strokeLinecap="round" strokeLinejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205 3 1m1.5.5-1.5-.5M6.75 7.364V3h-3v18m3-13.636 10.5-3.819" /></svg>;

        const IconFood = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-8 h-8 mb-2 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" /></svg>;
        const IconHealth = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-8 h-8 mb-2 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" /></svg>; // Reusing Heart
        const IconEventNews = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-8 h-8 mb-2 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z" /></svg>;
        const IconLostFound = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-8 h-8 mb-2 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /><path strokeLinecap="round" strokeLinejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" /></svg>;

        const IconEye = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" /><path strokeLinecap="round" strokeLinejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg>;
        const IconCoat = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" /></svg>;
        const IconBone = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>; // Simulating bone with search... actually wait, let's use a nice shape
        const IconWeight = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>; // Scale like
        const IconBowl = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z" /></svg>;
        const IconCheck = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg>;
        const IconSparkles = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" /></svg>;
        const IconPaw = () => <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6 text-theme-primary"><path strokeLinecap="round" strokeLinejoin="round" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" /></svg>; // Simple Paw/Face

        // --- DATA ---
        const BREED_SIZE_MAP = {
            // Small
            '繝医う繝ｻ繝励・繝峨Ν': 'small', '繝√Ρ繝ｯ': 'small', '繝溘ル繝√Η繧｢繝ｻ繝繝・け繧ｹ繝輔Φ繝・: 'small', '繝昴Γ繝ｩ繝九い繝ｳ': 'small',
            '譟ｴ迥ｬ(蟆・': 'small', '繝ｨ繝ｼ繧ｯ繧ｷ繝｣繝ｼ繝ｻ繝・Μ繧｢': 'small', '繝槭Ν繝√・繧ｺ': 'small', '繧ｷ繝ｼ繝ｻ繧ｺ繝ｼ': 'small', '繝代ヴ繝ｨ繝ｳ': 'small',
            '繝輔Ξ繝ｳ繝√・繝悶Ν繝峨ャ繧ｰ': 'small', '繝溘ル繝√Η繧｢繝ｻ繧ｷ繝･繝翫え繧ｶ繝ｼ': 'small', '繝代げ': 'small', '繧ｭ繝｣繝舌Μ繧｢繝ｻ繧ｭ繝ｳ繧ｰ繝ｻ繝√Ε繝ｼ繝ｫ繧ｺ繝ｻ繧ｹ繝代ル繧ｨ繝ｫ': 'small',
            '繧ｸ繝｣繝・け繝ｻ繝ｩ繝・そ繝ｫ繝ｻ繝・Μ繧｢': 'small', '繝懊せ繝医Φ繝ｻ繝・Μ繧｢': 'small', '繝壹く繝九・繧ｺ': 'small', '繧､繧ｿ繝ｪ繧｢繝ｳ繝ｻ繧ｰ繝ｬ繝ｼ繝上え繝ｳ繝・: 'small',
            '繝薙す繝ｧ繝ｳ繝ｻ繝輔Μ繝ｼ繧ｼ': 'small', '繧ｦ繧ｧ繧ｹ繝医・繝上う繝ｩ繝ｳ繝峨・繝帙Ρ繧､繝医・繝・Μ繧｢': 'small', '繧ｫ繝九・繝ｳ繝倥Φ繝ｻ繝繝・け繧ｹ繝輔Φ繝・: 'small',
            '繧ｱ繧｢繝ｼ繝ｳ繝ｻ繝・Μ繧｢': 'small', '繧ｹ繧ｳ繝・ぅ繝・す繝･繝ｻ繝・Μ繧｢': 'small', '繝√Φ・育究・・: 'small', '繝・ぅ繝ｼ繧ｫ繝・・繝ｻ繝励・繝峨Ν': 'small',
            '繝医う繝ｻ繝槭Φ繝√ぉ繧ｹ繧ｿ繝ｼ繝ｻ繝・Μ繧｢': 'small', '譌･譛ｬ繝・Μ繧｢': 'small', '繝弱・繝輔か繝ｼ繧ｯ繝ｻ繝・Μ繧｢': 'small', '繝弱・繝ｪ繝・メ繝ｻ繝・Μ繧｢': 'small',
            '繝励メ繝ｻ繝舌そ繝・ヨ繝ｻ繧ｰ繝ｪ繝輔か繝ｳ繝ｻ繝舌Φ繝・・繝ｳ': 'small', '繝悶Μ繝･繝・そ繝ｫ繝ｻ繧ｰ繝ｪ繝輔か繝ｳ': 'small', '繝溘ル繝√Η繧｢繝ｻ繝斐Φ繧ｷ繝｣繝ｼ': 'small',
            // Medium
            '譟ｴ迥ｬ': 'medium', '繧ｦ繧ｧ繝ｫ繧ｷ繝･繝ｻ繧ｳ繝ｼ繧ｮ繝ｼ繝ｻ繝壹Φ繝悶Ο繝ｼ繧ｯ': 'medium', '繝輔Ξ繝ｳ繝√・繝悶Ν繝峨ャ繧ｰ(螟ｧ)': 'medium', '繝薙・繧ｰ繝ｫ': 'medium',
            '繧｢繝｡繝ｪ繧ｫ繝ｳ繝ｻ繧ｳ繝・き繝ｼ繝ｻ繧ｹ繝代ル繧ｨ繝ｫ': 'medium', '繧ｷ繧ｧ繝・ヨ繝ｩ繝ｳ繝峨・繧ｷ繝ｼ繝励ラ繝・げ': 'medium', '繝懊・繝繝ｼ繝ｻ繧ｳ繝ｪ繝ｼ': 'medium',
            '繧､繝ｳ繧ｰ繝ｪ繝・す繝･繝ｻ繧ｳ繝・き繝ｼ繝ｻ繧ｹ繝代ル繧ｨ繝ｫ': 'medium', '繝悶Ν繝峨ャ繧ｰ': 'medium', '繧ｦ繧ｧ繝ｫ繧ｷ繝･繝ｻ繧ｳ繝ｼ繧ｮ繝ｼ繝ｻ繧ｫ繝ｼ繝・ぅ繧ｬ繝ｳ': 'medium',
            '繧｢繝｡繝ｪ繧ｫ繝ｳ繝ｻ繧ｹ繧ｿ繝・ヵ繧ｩ繝ｼ繝峨す繝｣繝ｼ繝ｻ繝悶Ν繝ｻ繝・Μ繧｢': 'medium', '繧｢繝｡繝ｪ繧ｫ繝ｳ繝ｻ繝斐ャ繝医・繝悶Ν繝ｻ繝・Μ繧｢': 'medium', '繧ｦ繧｣繝壹ャ繝・: 'medium',
            '繧ｪ繝ｼ繧ｹ繝医Λ繝ｪ繧｢繝ｳ繝ｻ繧ｭ繝｣繝医Ν繝ｻ繝峨ャ繧ｰ': 'medium', '繧ｪ繝ｼ繧ｹ繝医Λ繝ｪ繧｢繝ｳ繝ｻ繧ｱ繝ｫ繝斐・': 'medium', '繧ｪ繝ｼ繧ｹ繝医Λ繝ｪ繧｢繝ｳ繝ｻ繧ｷ繧ｧ繝代・繝・: 'medium',
            '逕ｲ譁千堪': 'medium', '繧ｭ繝ｼ繧ｹ繝帙Φ繝・: 'medium', '邏蟾樒堪': 'medium', '繧ｱ繝ｪ繝ｼ繝ｻ繝悶Ν繝ｼ繝ｻ繝・Μ繧｢': 'medium', '繧ｳ繝ｼ繧､繧ｱ繝ｫ繝帙Φ繝・ぅ繧ｨ': 'medium',
            '繧ｹ繧ｿ繝ｳ繝繝ｼ繝峨・繝繝・け繧ｹ繝輔Φ繝・: 'medium', '繧ｹ繧ｿ繝・ヵ繧ｩ繝ｼ繝峨す繝｣繝ｼ繝ｻ繝悶Ν繝ｻ繝・Μ繧｢': 'medium', '繝√Ε繧ｦ繝ｻ繝√Ε繧ｦ': 'medium',
            '譌･譛ｬ繧ｹ繝斐ャ繝・: 'medium', '繝舌そ繝・ヨ繝ｻ繝上え繝ｳ繝・: 'medium', '繝舌そ繝ｳ繧ｸ繝ｼ': 'medium', '蛹玲ｵｷ驕鍋堪': 'medium',
            '繝溘ョ繧｣繧｢繝繝ｻ繝励・繝峨Ν': 'medium', '繝溘ル繝√Η繧｢繝ｻ繝悶Ν繝ｻ繝・Μ繧｢': 'medium', '繝ｯ繧､繝､繝ｼ繝ｻ繝輔か繝・け繧ｹ繝ｻ繝・Μ繧｢': 'medium',
            // Large
            '繧ｴ繝ｼ繝ｫ繝・Φ繝ｻ繝ｬ繝医Μ繝舌・': 'large', '繝ｩ繝悶Λ繝峨・繝ｫ繝ｻ繝ｬ繝医Μ繝舌・': 'large', '繧ｷ繝吶Μ繧｢繝ｳ繝ｻ繝上せ繧ｭ繝ｼ': 'large', '繝舌・繝九・繧ｺ繝ｻ繝槭え繝ｳ繝・Φ繝ｻ繝峨ャ繧ｰ': 'large',
            '繧ｸ繝｣繝ｼ繝槭Φ繝ｻ繧ｷ繧ｧ繝代・繝峨・繝峨ャ繧ｰ': 'large', '遘狗伐迥ｬ': 'large', '繝輔Λ繝・ヨ繧ｳ繝ｼ繝・ャ繝峨・繝ｬ繝医Μ繝舌・': 'large', '繝繝ｫ繝｡繧ｷ繧｢繝ｳ': 'large',
            '繝峨・繝吶Ν繝槭Φ': 'large', '繝ｯ繧､繝槭Λ繝翫・': 'large', '繧ｻ繝ｳ繝医・繝舌・繝翫・繝・: 'large', '繧ｰ繝ｬ繝ｼ繝医・繝斐Ξ繝九・繧ｺ': 'large',
            '繝九Η繝ｼ繝輔ぃ繝ｳ繝峨Λ繝ｳ繝・: 'large', '繝ｭ繝・ヨ繝ｯ繧､繝ｩ繝ｼ': 'large', '繝懊Ν繧ｾ繧､': 'large', '繧ｰ繝ｬ繝ｼ繝医・繝・・繝ｳ': 'large',
            '繧｢繧､繝ｪ繝・す繝･繝ｻ繧ｦ繝ｫ繝輔ワ繧ｦ繝ｳ繝・: 'large', '繧｢繧､繝ｪ繝・す繝･繝ｻ繧ｻ繧ｿ繝ｼ': 'large', '繧｢繝輔ぎ繝ｳ繝ｻ繝上え繝ｳ繝・: 'large', '繧｢繝ｩ繧ｹ繧ｫ繝ｳ繝ｻ繝槭Λ繝溘Η繝ｼ繝・: 'large',
            '繧､繝ｳ繧ｰ繝ｪ繝・す繝･繝ｻ繧ｻ繧ｿ繝ｼ': 'large', '繧､繝ｳ繧ｰ繝ｪ繝・す繝･繝ｻ繝昴う繝ｳ繧ｿ繝ｼ': 'large', '繧ｪ繝ｼ繝ｫ繝峨・繧､繝ｳ繧ｰ繝ｪ繝・す繝･繝ｻ繧ｷ繝ｼ繝励ラ繝・げ': 'large',
            '繧ｫ繝ｼ繝ｪ繝ｼ繧ｳ繝ｼ繝・ャ繝峨・繝ｬ繝医Μ繝舌・': 'large', '繧ｵ繝ｫ繝ｼ繧ｭ': 'large', '繧ｸ繝｣繧､繧｢繝ｳ繝医・繧ｷ繝･繝翫え繧ｶ繝ｼ': 'large', '繧ｹ繧ｿ繝ｳ繝繝ｼ繝峨・繝励・繝峨Ν': 'large',
            '繝√ぉ繧ｵ繝斐・繧ｯ繝ｻ繝吶う繝ｻ繝ｬ繝医Μ繝舌・': 'large', '繝翫・繝ｪ繧ｿ繝ｳ繝ｻ繝槭せ繝・ぅ繝・: 'large', '繝吶Ν繧ｸ繧｢繝ｳ繝ｻ繧ｷ繧ｧ繝代・繝峨・繝峨ャ繧ｰ': 'large',
            '繝懊け繧ｵ繝ｼ': 'large', '繝悶Ν繝槭せ繝・ぅ繝・: 'large', '繝ｩ繝輔・繧ｳ繝ｪ繝ｼ': 'large', '繝ｬ繧ｪ繝ｳ繝吶Ν繧ｬ繝ｼ': 'large'
        };

        const PRODUCTS = [
            { id: 1, name: "繧｢繧ｫ繝・, tags: { age: 'all', concern: 'coat', priority: 'A', secondaryConcern: ['joints'], targetSizes: ['all'] }, img: "./images/acana.jpg", description: "逕溽黄蟄ｦ逧・↓驕ｩ豁｣縺ｪ譬・､翫よ眠魄ｮ縺ｪ閧蛾｡槭ｒ譛螟ｧ75%菴ｿ逕ｨ縺励∫ｭ玖ｉ縺ｨ陲ｫ豈帙ｒ繧ｵ繝昴・繝医・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=45GGT8+CWE66A+5FPU+61JSH", feature: "High Protein" },
            { id: 2, name: "繧｢繝ｩ繝ｳ繧ｺ 繝翫メ繝･繝ｩ繝ｫ", tags: { age: 'all', concern: 'allergy', priority: 'A', secondaryConcern: ['tear_burn'], targetSizes: ['small', 'medium'] }, img: "./images/alans.jpg", description: "驥守函縺ｮ鬟滉ｺ九ｒ蜀咲樟縲ゅΛ繝閧峨→繧ｵ繝・・繧､繝｢縲√ｏ縺壹°9遞ｮ縺ｮ蜴ｳ驕ｸ邏譚舌・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=45GGT8+BRB9FM+3J8+C1DUP", feature: "Hypoallergenic" },
            { id: 4, name: "縺・∪縺・, tags: { age: 'all', concern: 'tear_burn', priority: 'S', secondaryConcern: ['joints', 'digest'], targetSizes: ['small', 'medium'] }, img: "./images/umaka.jpg", description: "荵晏ｷ樒肇縲瑚庄蜻ｳ魑･縲・00%縲よｶ吶ｄ縺代→髢｢遽縺ｫ驟肴・縺励◆縲∝・蛛ｴ縺九ｉ貅｢繧後ｋ鄒弱＠縺輔・, price: "ﾂ･5,478", link: "http://msm.to/2U5R2J2", feature: "Premium Care" },
            { id: 5, name: "繧ｨ繝・そ繝ｳ繧ｷ繝｣繝ｫ", tags: { age: 'adult', concern: 'coat', priority: 'B', secondaryConcern: ['allergy'], targetSizes: ['all'] }, img: "./images/essential.jpg", description: "縺願ｉ荳堺ｽｿ逕ｨ縲・ｭ・7.5%縲ゅい繝ｬ繝ｫ繧ｲ繝ｳ謗帝勁縺ｨ繧ｪ繝｡繧ｬ3縺ｧ逧ｮ閹壹ヨ繝ｩ繝悶Ν縺ｫ迚ｹ蛹悶・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=45GGT8+BDMAIQ+3J8+3H2YHD", feature: "Fish Based" },
            { id: 6, name: "繧ｫ繝翫ぎ繝ｳ", tags: { age: 'all', concern: 'appetite', priority: 'S', secondaryConcern: ['active'], targetSizes: ['all'] }, img: "./images/canagan.jpg", description: "荳也阜荳ｭ縺ｧ諢帙＆繧後ｋ繧ｰ繝ｬ繧､繝ｳ繝輔Μ繝ｼ縲ゅメ繧ｭ繝ｳ60%縺ｮ鬟溘＞縺､縺阪→譬・､翫ヰ繝ｩ繝ｳ繧ｹ縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=45GGT8+CWE66A+5FPU+61JSH", feature: "Grain Free" },
            { id: 7, name: "繧ｫ繝翫ぎ繝ｳ 繝・Φ繧ｿ繝ｫ", tags: { age: 'all', concern: 'teeth', priority: 'A', secondaryConcern: ['appetite'], targetSizes: ['all'] }, img: "./images/canagan_dental.jpg", description: "迚ｹ險ｱ謌仙・驟榊粋縲る｣溘∋繧九□縺代〒諢帷堪縺ｮ縲悟哨蜀・・蛛･蠎ｷ縲阪ｒ螳医ｋ逕ｻ譛溽噪繝輔・繝峨・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=45GGT8+BQ4E82+3J8+5SG2LT", feature: "Oral Care" },
            { id: 8, name: "繧ｫ繝翫ぎ繝ｳ 繝√く繝ｳ・・し繝ｼ繝｢繝ｳ", tags: { age: 'all', concern: 'coat', priority: 'A', secondaryConcern: ['appetite'], targetSizes: ['all'] }, img: "./images/canagan_chickensalmon.jpg", description: "繝√く繝ｳ縺ｨ繧ｵ繝ｼ繝｢繝ｳ縺ｮ逶ｸ荵怜柑譫懊ょ￥鬟溷ｯｾ遲悶→鄒弱＠縺・ｯ帑ｸｦ縺ｿ縺ｮ邯ｭ謖√↓縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=3ZJU37+EGYCN6+4NYE+61Z81", feature: "Multi Protein" },
            { id: 9, name: "繧ｰ繝ｩ繝ｳ繝・, tags: { age: 'all', concern: 'tear_burn', priority: 'B', secondaryConcern: ['allergy'], targetSizes: ['all'] }, img: "./images/grands.jpg", description: "辟｡豺ｻ蜉繝ｻ繧ｰ繝ｬ繧､繝ｳ繝輔Μ繝ｼ縲ょｰ冗ｲ定ｨｭ險医〒縺願・縺ｫ蜆ｪ縺励＞繝輔Λ繝ｳ繧ｹ逕｣繝励Ξ繝溘い繝縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "http://msm.to/APkBGUm", feature: "Digest Support" },
            { id: 10, name: "繧ｰ繝ｬ繝・, tags: { age: 'all', concern: 'joints', priority: 'B', secondaryConcern: ['tear_burn'], targetSizes: ['small', 'medium'] }, img: "./images/glebo.jpg", description: "蝗ｽ逕｣繝ｻ髢｢遽繧ｱ繧｢縲よ蒲驟ｸ蛹匁・蛻・→繧ｰ繝ｫ繧ｳ繧ｵ繝溘Φ驟榊粋縺ｧ繧ｷ繝九い縺ｮ蜈・ｰ励ｒ邯ｭ謖√・, price: "ﾂ･隕∫｢ｺ隱・, link: "http://msm.to/3OyO6nm", feature: "Anti-Aging" },
            { id: 11, name: "縺薙・縺薙・縺斐・繧・, tags: { age: 'all', concern: 'tear_burn', priority: 'S', secondaryConcern: ['coat', 'odor'], targetSizes: ['small'] }, img: "./images/konokono.jpg", description: "蟆丞梛迥ｬ縺ｮ縲梧ｶ吶ｄ縺代・豈帑ｸｦ縺ｿ繝ｻ縺ｫ縺翫＞縲阪↓迚ｹ蛹悶り・辟ｶ邏譚舌・繧・＆縺励＞蝗ｽ逕｣縺秘｣ｯ縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "http://msm.to/7C7CAGn", feature: "Tear Burn Care" },
            { id: 12, name: "繝阪Ν繧ｽ繝ｳ繧ｺ", tags: { age: 'adult', concern: 'appetite', priority: 'B', secondaryConcern: ['digest'], targetSizes: ['medium', 'large'] }, img: "./images/nelsons.jpg", description: "荳ｭ蝙九・螟ｧ蝙狗堪蜷代￠縺ｮ螟ｧ螳ｹ驥上ゅげ繝ｬ繧､繝ｳ繝輔Μ繝ｼ縺ｧ豸亥喧縺ｨ螳ｶ險医ｒ荳｡遶九・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=3HRCDC+2Z6SY+3J8+ZQ80I", feature: "Large Breed" },
            { id: 13, name: "繝上ャ繝斐・繝峨ャ繧ｰ", tags: { age: 'all', concern: 'allergy', priority: 'B', secondaryConcern: ['obesity'], targetSizes: ['all'] }, img: "./images/happydog.jpg", description: "繝峨う繝・刀雉ｪ縺ｮ繝翫メ繝･繝ｩ繝ｫ繝輔・繝峨ら渚縺励＞繧ｿ繝ｳ繝代け貅舌〒繧｢繝ｬ繝ｫ繧ｮ繝ｼ繧・ｽ楢ｪｿ邂｡逅・↓縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "", feature: "German Quality" },
            { id: 14, name: "繝壹ヨ繧ｳ繝・, tags: { age: 'all', concern: 'appetite', priority: 'S', secondaryConcern: ['digest'], targetSizes: ['all'] }, img: "./images/petokoto.jpg", description: "譁ｰ魄ｮ縺ｪ鬟滓攝繧呈･騾溷・蜃阪よ焔菴懊ｊ縺斐・繧薙・譬・､翫→鬥吶ｊ縺ｧ縲・ｩ壹″縺ｮ鬟溘＞縺､縺阪ｒ縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=3ZJU37+EGYCN6+4NYE+61Z81", feature: "Fresh Food" },
            { id: 15, name: "繝溘す繝･繝ｯ繝ｳ", tags: { age: 'all', concern: 'joints', priority: 'S', secondaryConcern: ['tear_burn', 'coat'], targetSizes: ['all'] }, img: "./images/mishone.jpg", description: "髢｢遽繧ｱ繧｢縺ｮ譛鬮伜ｳｰ縲らｷ代う雋晞・蜷医〒縲√＞縺､縺ｾ縺ｧ繧りｻｽ繧・°縺ｪ繧ｹ繝・ャ繝励ｒ縲・, price: "ﾂ･4,378", link: "https://px.a8.net/svt/ejp?a8mat=45GGT8+C1FP16+4PA6+BXYE9", feature: "Joint Support" },
            { id: 16, name: "繝｢繧ｰ繧ｭ繝･繝ｼ繝・, tags: { age: 'all', concern: 'appetite', priority: 'B', secondaryConcern: [], targetSizes: ['all'] }, img: "./images/mogcube.jpg", description: "NZ逕｣繝ｩ繝縺ｮ繝輔Μ繝ｼ繧ｺ繝峨Λ繧､縲よ・､翫◎縺ｮ縺ｾ縺ｾ縺ｧ繝医ャ繝斐Φ繧ｰ繧・♀繧・▽縺ｫ繧よ怙驕ｩ縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=3HQZ35+BN56NM+3J8+354KNM", feature: "Freeze Dried" },
            { id: 17, name: "繝｢繧ｰ繝ｯ繝ｳ", tags: { age: 'all', concern: 'tear_burn', priority: 'S', secondaryConcern: ['coat', 'appetite'], targetSizes: ['all'] }, img: "./images/mogwan.jpg", description: "謇倶ｽ懊ｊ鬟溘Ξ繧ｷ繝斐・鄒主袖縺励＆縺ｨ譬・､翫ヰ繝ｩ繝ｳ繧ｹ縲る㍽闖懊→繝輔Ν繝ｼ繝・◆縺｣縺ｷ繧翫・莠ｺ豌湧o.1縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=3NGVLD+2NUUPU+3J8+1BPOF5", feature: "Best Seller" },
            { id: 18, name: "繧・ｏ縺・, tags: { age: 'senior', concern: 'appetite', priority: 'A', secondaryConcern: ['digest'], targetSizes: ['small', 'medium'] }, img: "./images/yawaka.jpg", description: "豌ｴ蛻・ｒ騾・＆縺ｪ縺・音谿願｣ｽ豕輔ゅす繝九い繧る｣溘∋繧・☆縺・嵜逕｣繧ｻ繝溘Δ繧､繧ｹ繝医ヵ繝ｼ繝峨・, price: "ﾂ･6,578", link: "http://msm.to/ApJikKQ", feature: "Soft Touch" },
            { id: 19, name: "繝ｦ繝ｪ繧ｫ繧ｴ", tags: { age: 'all', concern: 'none', priority: 'B', secondaryConcern: [], targetSizes: ['all'] }, img: "./images/yurikago.jpg", description: "縲悟ｮ臥悛縲阪→縲後Μ繝ｩ繝・け繧ｹ縲阪ｒ繝・・繝槭↓縲ゅワ繝ｼ繝悶・蜉帙〒遨上ｄ縺九↑豈取律繧偵・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=45GGT8+BQ4E82+3J8+5SG2LT", feature: "Relax Care" },
            { id: 20, name: "鬥ｬ閧芽・辟ｶ縺･縺上ｊ", tags: { age: 'all', concern: 'obesity', priority: 'A', secondaryConcern: ['allergy'], targetSizes: ['all'] }, img: "./images/baniku.jpg", description: "辭頑悽逕｣鬥ｬ閧峨ｒ雍・ｲ｢縺ｫ菴ｿ逕ｨ縲るｫ倥ち繝ｳ繝代け繝ｻ菴手р雉ｪ縺ｧ繝繧､繧ｨ繝・ヨ縺ｫ譛驕ｩ縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=3ZJU37+EGYCN6+4NYE+61Z81", feature: "Low Fat" },
            { id: 21, name: "蜥梧ｼ｢縺ｿ繧峨＞", tags: { age: 'senior', concern: 'none', priority: 'A', secondaryConcern: ['obesity'], targetSizes: ['all'] }, img: "./images/wakan.jpg", description: "89遞ｮ鬘槭・蜥梧ｼ｢讀咲黄繧帝・蜷医り脈蝟・・遏･諱ｵ縺ｧ繧ｷ繝九い譛溘・蛛･蠎ｷ繧貞ｾｹ蠎輔し繝昴・繝医・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=45GGT8+BDMAIQ+3J8+3H2YHD", feature: "Yakuzen Care" },
            { id: 22, name: "繝槭ャ繧ｯ繧｢繝繝繧ｹ", tags: { age: 'all', concern: 'appetite', priority: 'S', secondaryConcern: ['joints'], targetSizes: ['large', 'medium'] }, img: "./images/macadams.jpg", description: "荳鄒ｽ荳ｸ縺斐→縺ｮ繝√く繝ｳ繧剃ｽｿ逕ｨ縲よ・迥ｬ縺悟万縺ｶ鄒主袖縺励＆縺ｨ譬・､翫・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=4AX40F+59BWOY+3J8+5AKUQP", feature: "Whole Chicken" },
            { id: 23, name: "繝溘す繝･繝ｯ繝ｳ 蟆丞梛迥ｬ逕ｨ", tags: { age: 'all', concern: 'joints', priority: 'S', secondaryConcern: ['tear_burn', 'digest'], targetSizes: ['small'] }, img: "./images/mishone_small.png", description: "蟆丞梛迥ｬ縺ｮ郢顔ｴｰ縺ｪ蛛･蠎ｷ邯ｭ謖√↓縲る｣溘∋繧・☆縺・ｰ冗ｲ偵ち繧､繝励・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=45GGT8+C1FMPU+4PA6+BXYE9", feature: "Small Breed" },
            { id: 24, name: "繝壹Ο繝ｪ繧ｳ繝峨ャ繧ｰ繝輔・繝・繝ｩ繧､繝・, tags: { age: 'all', concern: 'obesity', priority: 'A', secondaryConcern: ['digest'], targetSizes: ['small', 'medium'] }, img: "./images/perolico_light.jpg", description: "菴弱き繝ｭ繝ｪ繝ｼ繝ｻ菴手р雉ｪ縲ら┌逅・↑縺冗ｾ主袖縺励￥菴馴㍾邂｡逅・・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=4AX40F+5URIGY+3J8+4ASX02", feature: "Diet Support" },
            { id: 25, name: "繝壹Ο繝ｪ繧ｳ 繧｢繝ｬ繝ｫ繧ｫ繝・ヨ", tags: { age: 'all', concern: 'allergy', priority: 'A', secondaryConcern: ['coat'], targetSizes: ['small', 'medium'] }, img: "./images/perolico_aller.jpg", description: "鬟溽黄繧｢繝ｬ繝ｫ繧ｮ繝ｼ縺ｫ驟肴・縲ょ宍驕ｸ縺輔ｌ縺溘ち繝ｳ繝代け貅舌ｒ菴ｿ逕ｨ縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=4AX40F+679M6A+3J8+54KL8Y", feature: "Allergy Care" },
            { id: 26, name: "繝峨け繧ｿ繝ｼ繧ｱ繧｢繝ｯ繝ｳ", tags: { age: 'senior', concern: 'joints', priority: 'A', secondaryConcern: ['digest', 'tear_burn'], targetSizes: ['all'] }, img: "./images/drcarewan.jpg", description: "迯｣蛹ｻ蟶ｫ逶｣菫ｮ縲ゅす繝九い迥ｬ縺ｮ蛛･蠎ｷ蟇ｿ蜻ｽ繧定・∴縺滓・､願ｨｭ險医・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=4AX40F+5VYDOI+3RW8+BX3J6", feature: "Vet Formulated" },
            { id: 27, name: "繧ｭ繝･繧｢繝壹ャ繝・蜿｣閾ｭ繧ｱ繧｢", tags: { age: 'all', concern: 'odor', priority: 'A', secondaryConcern: ['teeth', 'digest'], targetSizes: ['all'] }, img: "./images/curepet.jpg", description: "蟆る摩螳ｶ縺ｨ蜈ｱ蜷碁幕逋ｺ縲ょ・蛛ｴ縺九ｉ繧｢繝励Ο繝ｼ繝√☆繧九♀蜿｣繧ｱ繧｢縲・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=4AX40F+6AU7SY+3RW8+5YJRM", feature: "Breath Care" },
            { id: 28, name: "繝九Η繝ｼ繝医Λ繝", tags: { age: 'all', concern: 'coat', priority: 'B', secondaryConcern: ['digest'], targetSizes: ['all'] }, img: "./images/nutram.jpg", description: "繧ｫ繝翫ム逋ｺ縺ｮ繝帙Μ繧ｹ繝・ぅ繝・け繝輔・繝峨らｴ譚舌・邨・∩蜷医ｏ縺帙〒蛛･蠎ｷ繧偵し繝昴・繝医・, price: "ﾂ･隕∫｢ｺ隱・, link: "https://px.a8.net/svt/ejp?a8mat=4AX40F+5NMB7M+5OMY+5YJRM", feature: "Holistic" }
        ];

        const BREEDS_DATA = {
            '縺り｡・: ['繧｢繧､繝ｪ繝・す繝･繝ｻ繧ｦ繝ｫ繝輔ワ繧ｦ繝ｳ繝・, '繧｢繧､繝ｪ繝・す繝･繝ｻ繧ｻ繧ｿ繝ｼ', '遘狗伐迥ｬ', '繧｢繝輔ぎ繝ｳ繝ｻ繝上え繝ｳ繝・, '繧｢繝ｩ繧ｹ繧ｫ繝ｳ繝ｻ繝槭Λ繝溘Η繝ｼ繝・, '繧｢繝｡繝ｪ繧ｫ繝ｳ繝ｻ繧｢繧ｭ繧ｿ', '繧｢繝｡繝ｪ繧ｫ繝ｳ繝ｻ繧ｳ繝・き繝ｼ繝ｻ繧ｹ繝代ル繧ｨ繝ｫ', '繧｢繝｡繝ｪ繧ｫ繝ｳ繝ｻ繧ｹ繧ｿ繝・ヵ繧ｩ繝ｼ繝峨す繝｣繝ｼ繝ｻ繝悶Ν繝ｻ繝・Μ繧｢', '繧｢繝｡繝ｪ繧ｫ繝ｳ繝ｻ繝斐ャ繝医・繝悶Ν繝ｻ繝・Μ繧｢', '繧､繧ｿ繝ｪ繧｢繝ｳ繝ｻ繧ｰ繝ｬ繝ｼ繝上え繝ｳ繝・, '繧､繝ｳ繧ｰ繝ｪ繝・す繝･繝ｻ繧ｳ繝・き繝ｼ繝ｻ繧ｹ繝代ル繧ｨ繝ｫ', '繧､繝ｳ繧ｰ繝ｪ繝・す繝･繝ｻ繧ｻ繧ｿ繝ｼ', '繧､繝ｳ繧ｰ繝ｪ繝・す繝･繝ｻ繧ｹ繝励Μ繝ｳ繧ｬ繝ｼ繝ｻ繧ｹ繝代ル繧ｨ繝ｫ', '繧､繝ｳ繧ｰ繝ｪ繝・す繝･繝ｻ繝昴う繝ｳ繧ｿ繝ｼ', '繧ｦ繧｣繝壹ャ繝・, '繧ｦ繧ｧ繧ｹ繝医・繝上う繝ｩ繝ｳ繝峨・繝帙Ρ繧､繝医・繝・Μ繧｢', '繧ｦ繧ｧ繝ｫ繧ｷ繝･繝ｻ繧ｳ繝ｼ繧ｮ繝ｼ繝ｻ繧ｫ繝ｼ繝・ぅ繧ｬ繝ｳ', '繧ｦ繧ｧ繝ｫ繧ｷ繝･繝ｻ繧ｳ繝ｼ繧ｮ繝ｼ繝ｻ繝壹Φ繝悶Ο繝ｼ繧ｯ', '繧ｦ繧ｧ繝ｫ繧ｷ繝･繝ｻ繝・Μ繧｢', '繧ｨ繧｢繝・・繝ｫ繝ｻ繝・Μ繧｢', '繧ｪ繝ｼ繧ｹ繝医Λ繝ｪ繧｢繝ｳ繝ｻ繧ｭ繝｣繝医Ν繝ｻ繝峨ャ繧ｰ', '繧ｪ繝ｼ繧ｹ繝医Λ繝ｪ繧｢繝ｳ繝ｻ繧ｱ繝ｫ繝斐・', '繧ｪ繝ｼ繧ｹ繝医Λ繝ｪ繧｢繝ｳ繝ｻ繧ｷ繧ｧ繝代・繝・, '繧ｪ繝ｼ繧ｹ繝医Λ繝ｪ繧｢繝ｳ繝ｻ繝・Μ繧｢', '繧ｪ繝ｼ繝ｫ繝峨・繧､繝ｳ繧ｰ繝ｪ繝・す繝･繝ｻ繧ｷ繝ｼ繝励ラ繝・げ'],
            '縺玖｡・: ['繧ｫ繝ｼ繝ｪ繝ｼ繧ｳ繝ｼ繝・ャ繝峨・繝ｬ繝医Μ繝舌・', '逕ｲ譁千堪', '繧ｫ繝九・繝ｳ繝倥Φ繝ｻ繝繝・け繧ｹ繝輔Φ繝・, '繧ｭ繝｣繝舌Μ繧｢繝ｻ繧ｭ繝ｳ繧ｰ繝ｻ繝√Ε繝ｼ繝ｫ繧ｺ繝ｻ繧ｹ繝代ル繧ｨ繝ｫ', '邏蟾樒堪', '繧ｰ繝ｬ繝ｼ繝医・繝・・繝ｳ', '繧ｰ繝ｬ繝ｼ繝医・繝斐Ξ繝九・繧ｺ', '繧ｱ繧｢繝ｼ繝ｳ繝ｻ繝・Μ繧｢', '繧ｱ繝ｪ繝ｼ繝ｻ繝悶Ν繝ｼ繝ｻ繝・Μ繧｢', '繧ｳ繝ｼ繧､繧ｱ繝ｫ繝帙Φ繝・ぅ繧ｨ', '繧ｴ繝ｼ繝ｫ繝・Φ繝ｻ繝ｬ繝医Μ繝舌・', '繧ｳ繝｢繝ｳ繝峨・繝ｫ'],
            '縺戊｡・: ['繧ｵ繝ｫ繝ｼ繧ｭ', '繧ｵ繝｢繧ｨ繝・, '繧ｵ繝ｼ繝ｫ繝ｭ繝ｼ繧ｹ繝ｻ繧ｦ繝ｫ繝輔ラ繝・げ', '繧ｷ繝ｼ繝ｻ繧ｺ繝ｼ', '譟ｴ迥ｬ', '繧ｷ繝吶Μ繧｢繝ｳ繝ｻ繝上せ繧ｭ繝ｼ', '繧ｷ繝｣繝ｼ繝ｻ繝壹う', '繧ｸ繝｣繝ｼ繝槭Φ繝ｻ繧ｷ繧ｧ繝代・繝峨・繝峨ャ繧ｰ', '繧ｸ繝｣繝ｼ繝槭Φ繝ｻ繧ｷ繝ｧ繝ｼ繝医・繧｢繝ｼ繝峨・繝昴う繝ｳ繧ｿ繝ｼ', '繧ｸ繝｣繧､繧｢繝ｳ繝医・繧ｷ繝･繝翫え繧ｶ繝ｼ', '繧ｸ繝｣繝・け繝ｻ繝ｩ繝・そ繝ｫ繝ｻ繝・Μ繧｢', '繧ｹ繧ｭ繝・ヱ繝ｼ繧ｭ', '繧ｹ繧ｳ繝・ぅ繝・す繝･繝ｻ繝・Μ繧｢', '繧ｹ繧ｿ繝・ヵ繧ｩ繝ｼ繝峨す繝｣繝ｼ繝ｻ繝悶Ν繝ｻ繝・Μ繧｢', '繧ｹ繧ｿ繝ｳ繝繝ｼ繝峨・繝励・繝峨Ν', '繧ｻ繝ｳ繝医・繝舌・繝翫・繝・],
            '縺溯｡・: ['繧ｿ繧､繝ｻ繝ｪ繝・ず繝舌ャ繧ｯ繝ｻ繝峨ャ繧ｰ', '繝繝ｫ繝｡繧ｷ繧｢繝ｳ', '繝√ぉ繧ｵ繝斐・繧ｯ繝ｻ繝吶う繝ｻ繝ｬ繝医Μ繝舌・', '繝√Ρ繝ｯ', '迢・ｼ医■繧難ｼ・, '繝√Ε繧ｦ繝ｻ繝√Ε繧ｦ', '繝・ぅ繝ｼ繧ｫ繝・・繝ｻ繝励・繝峨Ν', '繝医う繝ｻ繝槭Φ繝√ぉ繧ｹ繧ｿ繝ｼ繝ｻ繝・Μ繧｢', '繝医う繝ｻ繝励・繝峨Ν', '繝峨・繝吶Ν繝槭Φ', '繝峨ざ繝ｻ繧｢繝ｫ繝倥Φ繝・ぅ繝ｼ繝・],
            '縺ｪ繝ｻ縺ｯ陦・: ['繝翫・繝ｪ繧ｿ繝ｳ繝ｻ繝槭せ繝・ぅ繝・, '繝九Η繝ｼ繝輔ぃ繝ｳ繝峨Λ繝ｳ繝・, '譌･譛ｬ繧ｹ繝斐ャ繝・, '譌･譛ｬ繝・Μ繧｢', '繝弱Ν繧ｦ繧ｧ繝ｼ繝ｻ繧ｨ繝ｫ繧ｯ繝上え繝ｳ繝・, '繝弱・繝輔か繝ｼ繧ｯ繝ｻ繝・Μ繧｢', '繝弱・繝ｪ繝・メ繝ｻ繝・Μ繧｢', '繝舌・繝九・繧ｺ繝ｻ繝槭え繝ｳ繝・Φ繝ｻ繝峨ャ繧ｰ', '繝代げ', '繝舌そ繝・ヨ繝ｻ繝上え繝ｳ繝・, '繝舌そ繝ｳ繧ｸ繝ｼ', '繝代ヴ繝ｨ繝ｳ', '繝薙い繝・ャ繝峨・繧ｳ繝ｪ繝ｼ', '繝薙す繝ｧ繝ｳ繝ｻ繝輔Μ繝ｼ繧ｼ', '繝薙・繧ｰ繝ｫ', '繝輔Λ繝・ヨ繧ｳ繝ｼ繝・ャ繝峨・繝ｬ繝医Μ繝舌・', '繝輔Ξ繝ｳ繝√・繝悶Ν繝峨ャ繧ｰ', '繝悶Μ繧ｿ繝九・繝ｻ繧ｹ繝代ル繧ｨ繝ｫ', '繝悶Ν繝ｻ繝・Μ繧｢', '繝悶Ν繝峨ャ繧ｰ', '繝悶Ν繝槭せ繝・ぅ繝・, '繝励・繝峨Ν', '繝励メ繝ｻ繝舌そ繝・ヨ繝ｻ繧ｰ繝ｪ繝輔か繝ｳ繝ｻ繝舌Φ繝・・繝ｳ', '繝壹く繝九・繧ｺ', '繝吶Ν繧ｸ繧｢繝ｳ繝ｻ繧ｷ繧ｧ繝代・繝峨・繝峨ャ繧ｰ繝ｻ繝槭Μ繝弱い', '繝懊・繝繝ｼ繝ｻ繧ｳ繝ｪ繝ｼ', '繝懊け繧ｵ繝ｼ', '繝懊せ繝医Φ繝ｻ繝・Μ繧｢', '蛹玲ｵｷ驕鍋堪', '繝懊Ν繧ｾ繧､', '繝昴Γ繝ｩ繝九い繝ｳ', '繝昴Μ繝・す繝･繝ｻ繝ｭ繝ｼ繝ｩ繝ｳ繝峨・繧ｷ繝ｼ繝励ラ繝・げ'],
            '縺ｾ縲懊ｏ陦・: ['繝槭Ν繝√・繧ｺ', '繝槭Φ繝√ぉ繧ｹ繧ｿ繝ｼ繝ｻ繝・Μ繧｢', '繝溘ル繝√Η繧｢繝ｻ繧ｷ繝･繝翫え繧ｶ繝ｼ', '繝溘ル繝√Η繧｢繝ｻ繝繝・け繧ｹ繝輔Φ繝・, '繝溘ル繝√Η繧｢繝ｻ繝斐Φ繧ｷ繝｣繝ｼ', '繝溘ル繝√Η繧｢繝ｻ繝悶Ν繝ｻ繝・Μ繧｢', '繝ｨ繝ｼ繧ｯ繧ｷ繝｣繝ｼ繝ｻ繝・Μ繧｢', '繝ｩ繝悶Λ繝峨・繝ｫ繝ｻ繝ｬ繝医Μ繝舌・', '繝ｩ繝輔・繧ｳ繝ｪ繝ｼ', '繝ｩ繧ｵ繝ｻ繧｢繝励た', '繝ｬ繧ｪ繝ｳ繝吶Ν繧ｬ繝ｼ', '繝ｭ繝・ヨ繝ｯ繧､繝ｩ繝ｼ', '繝ｯ繧､繝槭Λ繝翫・', '繝ｯ繧､繝､繝ｼ繝ｻ繝輔か繝・け繧ｹ繝ｻ繝・Μ繧｢']
        };

        const AGE_DATA = [
            '0豁ｳ', '1豁ｳ', '2豁ｳ', '3豁ｳ', '4豁ｳ', '5豁ｳ', '6豁ｳ', '7豁ｳ', '8豁ｳ', '9豁ｳ', '10豁ｳ',
            '11豁ｳ', '12豁ｳ', '13豁ｳ', '14豁ｳ', '15豁ｳ', '16豁ｳ', '17豁ｳ', '18豁ｳ', '19豁ｳ', '20豁ｳ莉･荳・
        ];

        const EVENTS_DATA = [
            { date: "3譛・4譌･", title: "GO WITH 繧上ｓ縺薙・繝ｩ繧ｽ繝ｳ", place: "遖丞ｲ｡逵・螟ｧ豼蜈ｬ蝨・, tags: ["繝槭Λ繧ｽ繝ｳ", "繧ｹ繝昴・繝・, "螻句､・], img: "https://images.unsplash.com/photo-1591769225440-811ad7d6eca6?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・1譌･-23譌･", title: "ABURAYAMA WANT", place: "遖丞ｲ｡逵・豐ｹ螻ｱ", tags: ["繝槭Ν繧ｷ繧ｧ", "謦ｮ蠖ｱ莨・, "螻句､・], img: "https://images.unsplash.com/photo-1548199973-03cce0bbc87b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・譌･-8譌･", title: "蠎・ｳｶ繧上ｓ繧上ｓ繝舌Ξ繝ｳ繧ｿ繧､繝ｳ", place: "蠎・ｳｶ逵・蠎・ｳｶ蠎・沺蜈ｬ蝨・, tags: ["譛螟ｧ邏・, "螻句､・, "繝槭Ν繧ｷ繧ｧ"], img: "https://images.unsplash.com/photo-1534361960057-19889db9621e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・4譌･-15譌･", title: "迥ｬ縺｣縺薙∪縺､繧・, place: "遘狗伐逵・貉ｯ豐｢蟶・, tags: ["莨晉ｵｱ陦御ｺ・, "髮ｪ逾ｭ繧・, "螻句､・], img: "https://images.unsplash.com/photo-1516734212186-a967f81ad0d7?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・4譌･-15譌･", title: "謌千伐繧・ａ縺ｮ繝峨ャ繧ｰ繝輔ぉ繧ｹ繝・ぅ繝舌Ν", place: "蜊・痩逵・謌千伐繧・ａ迚ｧ蝣ｴ", tags: ["迚ｧ蝣ｴ", "謦ｮ蠖ｱ莨・, "螻句､・], img: "https://images.unsplash.com/photo-1587300003388-59208cc962cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・4譌･-15譌･", title: "繧上ｓ縺薙・繝輔ぉ繧ｹ", place: "蝓ｼ邇臥恁 蝓ｼ邇峨せ繧ｿ繧ｸ繧｢繝", tags: ["繝輔ぉ繧ｹ", "螻句､・, "繧ｳ繧｢螻､"], img: "https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・4譌･-15譌･", title: "迥ｬ逾ｭ繧・, place: "蟯宣・逵・貂・ｵ・㈹螻ｱ蜈ｬ蝨・, tags: ["螟ｧ隕乗ｨ｡", "繝槭Ν繧ｷ繧ｧ", "荳ｭ驛ｨ"], img: "https://images.unsplash.com/photo-1591769225440-811ad7d6eca6?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・1譌･-22譌･", title: "繧上ｓ縺ｫ繧・ｓ繝峨・繝 2026", place: "諢帷衍逵・Aichi Sky Expo", tags: ["蝗ｽ蜀・怙螟ｧ", "螻句・", "螻慕､ｺ"], img: "https://images.unsplash.com/photo-1587300003388-59208cc962cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・1譌･-22譌･", title: "蜊・痩繧上ｓ繧上ｓ蜀ｬ縺ｾ縺､繧・, place: "蜊・痩逵・蟷募ｼｵ繝｡繝・そ", tags: ["螻句・", "繝槭・繧ｱ繝・ヨ", "蜀ｬ逾ｭ繧・], img: "https://images.unsplash.com/photo-1534361960057-19889db9621e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・2譌･", title: "HUSKY JAPAN SUMMIT", place: "蟯｡螻ｱ逵・鮟剃ｺ募ｱｱ", tags: ["繝上せ繧ｭ繝ｼ", "繧ｪ繝穂ｼ・, "迚ｹ蛹・], img: "https://images.unsplash.com/photo-1548199973-03cce0bbc87b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・8譌･-3譛・譌･", title: "豌ｴ蜈・ラ繝・げ繝輔ぉ繧ｹ繝・ぅ繝舌Ν", place: "譚ｱ莠ｬ驛ｽ 豌ｴ蜈・・蝨・, tags: ["蜈ｬ蝨・, "螻句､・, "23蛹ｺ譛螟ｧ"], img: "https://images.unsplash.com/photo-1516734212186-a967f81ad0d7?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "2譛・8譌･-3譛・譌･", title: "縺ｿ縺ｮ縺翫ｏ繧薙ｏ繧薙Δ繝ｼ繝ｫ", place: "螟ｧ髦ｪ蠎・邂暮擇", tags: ["繝槭Ν繧ｷ繧ｧ", "縺翫＠繧・ｌ", "螻句､・], img: "https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "3譛・譌･-8譌･", title: "菴仙姥an繝代・繧ｯ", place: "蜊・痩逵・菴仙牙沁蝮蜈ｬ蝨・, tags: ["繝槭Ν繧ｷ繧ｧ", "螻句､・, "譁ｰ螳夂分"], img: "https://images.unsplash.com/photo-1591769225440-811ad7d6eca6?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "3譛・譌･-8譌･", title: "繧上ｓ縺繧峨￠繝輔ぉ繧ｹ", place: "諢帷衍逵・蟇梧ｵ懃ｷ大慍", tags: ["譌･譛ｬ譛螟ｧ邏・, "繝槭Ν繧ｷ繧ｧ", "螻句､・], img: "https://images.unsplash.com/photo-1548199973-03cce0bbc87b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "3譛・譌･-8譌･", title: "譟上・闡牙・蝨奪ogFesta", place: "蜊・痩逵・譟上・闡牙・蝨・, tags: ["蜈ｬ蝨・, "繝輔ぉ繧ｹ", "螻句､・], img: "https://images.unsplash.com/photo-1534361960057-19889db9621e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "3譛・4譌･-15譌･", title: "RKB遖丞ｲ｡逋ｾ驕捺ｵ懊ラ繝・げ繝輔ぉ繧ｹ繧ｿ", place: "遖丞ｲ｡逵・逋ｾ驕捺ｵ・, tags: ["荵晏ｷ樊怙螟ｧ", "繝輔ぉ繧ｹ", "螻句､・], img: "https://images.unsplash.com/photo-1587300003388-59208cc962cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "3譛・4譌･-15譌･", title: "莨願ｱ・ｫ伜次繧上ｓ繧上ｓ繝槭Ν繧ｷ繧ｧ", place: "髱吝ｲ｡逵・莨願ｱ・ｫ伜次", tags: ["隕ｳ蜈牙慍", "繝槭Ν繧ｷ繧ｧ", "螻句､・], img: "https://images.unsplash.com/photo-1516734212186-a967f81ad0d7?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "3譛・9譌･-22譌･", title: "襍､繝ｬ繝ｳ繧ｬ縺ｧ繧上ｓ縺輔ｓ縺ｽ", place: "逾槫･亥ｷ晉恁 讓ｪ豬懆ｵ､繝ｬ繝ｳ繧ｬ蛟牙ｺｫ", tags: ["譎ｯ隕ｳ", "縺翫＠繧・ｌ", "螻句､・], img: "https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "3譛・0譌･", title: "縺ｯ縺ｪ縺ｺ縺｡繧・ヵ繧ｧ繧ｹ繝・ぅ繝舌Ν", place: "貊玖ｳ逵・(莠亥ｮ・", tags: ["遏ｭ鬆ｭ遞ｮ", "繧ｪ繝穂ｼ・, "辭ｱ迢ら噪"], img: "https://images.unsplash.com/photo-1548199973-03cce0bbc87b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "3譛・0譌･-22譌･", title: "蟾晁･ｿ繝峨ャ繧ｰ繝ｩ繝ｳ繝槭Ν繧ｷ繧ｧ", place: "蜈ｵ蠎ｫ逵・蟾晁･ｿ", tags: ["繝峨ャ繧ｰ繝ｩ繝ｳ", "繝槭Ν繧ｷ繧ｧ", "髢｢隘ｿ"], img: "https://images.unsplash.com/photo-1534361960057-19889db9621e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "3譛・8譌･-29譌･", title: "蠎・ｳｶ繧上ｓ繧上ｓ譯懊∪縺､繧・, place: "蠎・ｳｶ逵・繧ｸ繧｢繧ｦ繝医Ξ繝・ヨ", tags: ["譯・, "謦ｮ蠖ｱ莨・, "譏縺・], img: "https://images.unsplash.com/photo-1591769225440-811ad7d6eca6?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" },
            { date: "3譛・8譌･-29譌･", title: "譟上・闡欝-SITE 繝峨ャ繧ｰ繧､繝吶Φ繝・, place: "蜊・痩逵・譟週-SITE", tags: ["繝ｩ繧､繝輔せ繧ｿ繧､繝ｫ", "阡ｦ螻区嶌蠎・, "螻句､・], img: "https://images.unsplash.com/photo-1587300003388-59208cc962cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" }
        ];

        const LOST_DATA = [];

        // === COMPONENTS ===

        // --- 1. LANDING PAGE ---
        const LandingPage = ({ onLogin }) => {
            return (
                <div className="min-h-screen bg-theme-base flex flex-col items-center pb-20 fade-in relative pt-16">
                    {/* Logo (Restored & Centered) */}
                    <img src="./images/logo_hero_new.png" className="w-64 mb-6" />

                    {/* Text Section (Clean Layout) */}
                    <div className="text-center px-6 mb-16 relative z-10 text-theme-text">
                        <h1 className="font-serif text-3xl md:text-4xl font-medium leading-relaxed tracking-wide drop-shadow-sm mb-6">
                            諢帷堪縺ｮ邂｡逅・・br />繧ｹ繝槭・荳縺､縺ｧ縲・                        </h1>
                        <p className="text-sm text-theme-text/70 font-sans tracking-wider leading-loose">
                            繝輔・繝芽ｨｺ譁ｭ縲√う繝吶Φ繝域ュ蝣ｱ縲・br />繝ｯ繧ｯ繝√Φ謗･遞ｮ險倬鹸縺ｾ縺ｧ蜈ｨ縺ｦ螳檎ｵ舌・                        </p>
                    </div>

                    <div className="w-full max-w-md px-6 relative z-10 grid grid-cols-2 gap-x-4 gap-y-8 mb-16">
                        <FeatureCard
                            icon={<IconFood />}
                            title="Food Diagnosis"
                            jp="繝輔・繝芽ｨｺ譁ｭ"
                            desc="蟷ｴ鮨｢縺ｨ菴楢ｳｪ縺ｫ蜷医ｏ縺帙◆譛驕ｩ縺ｪ荳逧ｿ繧呈署譯・
                        />
                        <FeatureCard
                            icon={<IconHealth />}
                            title="Health Record"
                            jp="繝倥Ν繧ｹ繧ｱ繧｢險倬鹸"
                            desc="繝ｯ繧ｯ繝√Φ謗･遞ｮ譌･縺ｨ谺｡蝗樔ｺ亥ｮ壹ｒ邂｡逅・
                        />
                        <FeatureCard
                            icon={<IconEventNews />}
                            title="Event News"
                            jp="繧､繝吶Φ繝域ュ蝣ｱ"
                            desc="騾ｱ譛ｫ縺ｮ縺雁・縺九￠蜈医ｒ蜈ｨ蝗ｽ縺九ｉ讀懃ｴ｢"
                        />
                        <FeatureCard
                            icon={<IconLostFound />}
                            title="Lost & Found"
                            jp="霑ｷ蟄先軸遉ｺ譚ｿ"
                            desc="蝨ｰ蝓溘・縺ｿ繧薙↑縺ｧ螳医ｋ螳牙ｿ・ロ繝・ヨ繝ｯ繝ｼ繧ｯ"
                        />
                    </div>

                    {/* Google Login Section (Moved Below) */}
                    <div className="w-full max-w-xs px-6 mb-16">
                        <div className="text-center mb-6">
                            <p className="font-serif text-theme-text text-lg mb-1">縺輔≠縲∝ｧ九ａ縺ｾ縺励ｇ縺・/p>
                            <p className="text-xs text-theme-text/50">逋ｻ骭ｲ繧らｮ｡逅・ｂ縲√％繧後・縺ｨ縺､縲・/p>
                        </div>
                        <button onClick={onLogin} className="w-full group relative overflow-hidden bg-white border border-theme-primary/30 text-theme-text font-serif px-6 py-5 rounded-2xl shadow-soft hover:shadow-card transition-all duration-300 active:scale-95 flex items-center justify-center gap-3">
                            <svg className="w-5 h-5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4" />
                                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853" />
                                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05" />
                                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335" />
                            </svg>
                            <span className="tracking-widest font-bold text-sm">Google縺ｧ繝ｭ繧ｰ繧､繝ｳ</span>
                        </button>
                    </div>

                    <footer className="text-center text-[10px] text-theme-text/30 pb-8 font-sans">
                        ﾂｩ 2026 PepLab Inc.
                    </footer>
                </div>
            );
        };

        const FeatureCard = ({ icon, title, jp, desc }) => (
            <div className="flex flex-col items-center text-center p-2">
                <div className="mb-2 p-3 bg-white/50 rounded-full text-theme-primary">
                    {icon}
                </div>
                <h3 className="font-serif text-base text-theme-text mb-1">{jp}</h3>
                <p className="text-[10px] text-theme-text/60 leading-relaxed font-sans">{desc}</p>
            </div>
        );


        // --- 2. DASHBOARD ---
        // --- 2. DASHBOARD ---
        const Dashboard = ({ user, onLogout }) => {
            const [tab, setTab] = useState('menu');
            const [answers, setAnswers] = useState(null);
            const [dogProfile, setDogProfile] = useState(null);
            const [vaccineData, setVaccineData] = useState(null); // New: Vaccine Record Object
            const [isProfileOpen, setIsProfileOpen] = useState(false);
            const [isSyncing, setIsSyncing] = useState(false); // New: Cloud Saving Indicator

            // Load Data from Firestore on Mount
            useEffect(() => {
                if (!user || !db) return;

                // Firestore Listen (Realtime Sync)
                const unsubscribe = db.collection('users').doc(user.uid).onSnapshot(doc => {
                    if (doc.exists) {
                        const data = doc.data();
                        setAnswers(data.answers || null);
                        setDogProfile(data.dogProfile || null);
                        setVaccineData(data.vaccineData || null);
                    } else {
                        // New user: Set default structure
                        console.log("New user detected, ready to save.");
                    }
                }, error => {
                    console.error("Error fetching data:", error);
                    // Fallback to local storage if offline/error? (Logic omitted for simplicity, relying on Auth)
                });

                return () => unsubscribe();
            }, [user]);

            // Save Helper
            const saveToCloud = async (field, data) => {
                if (!user || !db) return;
                setIsSyncing(true);
                try {
                    await db.collection('users').doc(user.uid).set({
                        [field]: data
                    }, { merge: true });
                } catch (e) {
                    console.error("Save Error:", e);
                    alert("菫晏ｭ倥↓螟ｱ謨励＠縺ｾ縺励◆");
                } finally {
                    setTimeout(() => setIsSyncing(false), 500); // Visual delay for UX
                }
            };

            // Wrapped Setters
            const handleProfileSave = (profile) => {
                // Update local (optimistic) and cloud
                setDogProfile(profile);
                saveToCloud('dogProfile', profile);
                setIsProfileOpen(false);
            };

            const handleDiagnosisResult = (result) => {
                setAnswers(result);
                saveToCloud('answers', result);
            };

            const handleVaccineSave = (data) => {
                setVaccineData(data);
                saveToCloud('vaccineData', data);
            };

            const renderContent = () => {
                if (isProfileOpen) return <ProfileEditor current={dogProfile} onSave={handleProfileSave} onCancel={() => setIsProfileOpen(false)} />;

                switch (tab) {
                    case 'menu': return <HomeMenu onNavigate={setTab} profile={dogProfile} hasDiagnosis={!!answers} onEditProfile={() => setIsProfileOpen(true)} />;
                    case 'home': return answers ? <FoodResults answers={answers} onReset={() => handleDiagnosisResult(null)} onShowAll={() => setTab('ranking')} /> : <Diagnosis onResult={handleDiagnosisResult} onShowAll={() => setTab('ranking')} />;
                    case 'ranking': return <ProductRanking onBack={() => setTab('home')} />;
                    case 'record': return <RecordTab data={vaccineData} onSave={handleVaccineSave} onBack={() => setTab('menu')} />;
                    case 'event': return <EventsTab onBack={() => setTab('menu')} />;
                    case 'lost': return <LostTab onBack={() => setTab('menu')} />;
                    default: return <HomeMenu onNavigate={setTab} profile={dogProfile} hasDiagnosis={!!answers} onEditProfile={() => setIsProfileOpen(true)} />;
                }
            };

            return (
                <div className="min-h-screen bg-theme-base pb-24 fade-in">
                    <header className="fixed top-0 w-full max-w-md mx-auto z-40 bg-theme-base/80 backdrop-blur-md px-6 py-4 flex justify-between items-center shadow-sm">
                        <img onClick={() => { setTab('menu'); setIsProfileOpen(false); }} src="./images/logo_header.png" className="h-8 cursor-pointer object-contain" alt="PepLab" />
                        <div className="flex items-center gap-4">
                            {/* Sync Indicator */}
                            {isSyncing && <div className="w-2 h-2 rounded-full bg-theme-secondary animate-ping"></div>}

                            <button onClick={() => setIsProfileOpen(true)} className="w-8 h-8 rounded-full bg-theme-muted overflow-hidden border border-theme-text/10">
                                {dogProfile?.image ? <img src={dogProfile.image} className="w-full h-full object-cover" /> : <div className="w-full h-full flex items-center justify-center text-theme-text/30"><IconPaw /></div>}
                            </button>
                            <button onClick={onLogout} className="text-xs text-theme-text/50 hover:text-theme-primary transition-colors">Log out</button>
                        </div>
                    </header>
                    <main className="pt-20 px-6">
                        {renderContent()}
                    </main>
                    <nav className="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white/90 backdrop-blur-lg border-t border-theme-muted flex justify-around py-2 pb-safe z-50">
                        <NavButton active={tab === 'menu'} onClick={() => { setTab('menu'); setIsProfileOpen(false); }} icon={<IconHome active={tab === 'menu'} />} label="繝帙・繝" />
                        <NavButton active={tab === 'record'} onClick={() => { setTab('record'); setIsProfileOpen(false); }} icon={<IconRecord active={tab === 'record'} />} label="險倬鹸" />
                        <NavButton active={tab === 'event'} onClick={() => { setTab('event'); setIsProfileOpen(false); }} icon={<IconEvent active={tab === 'event'} />} label="繧､繝吶Φ繝・ />
                        <NavButton active={tab === 'lost'} onClick={() => { setTab('lost'); setIsProfileOpen(false); }} icon={<IconLost active={tab === 'lost'} />} label="霑ｷ蟄・ />
                    </nav>
                </div>
            );
        };

        // --- SHARED COMPONENTS ---
        const TabbedModal = ({ isOpen, onClose, title, data, onSelect }) => {
            if (!isOpen) return null;
            const tabs = Object.keys(data);
            const [activeTab, setActiveTab] = useState(tabs[0]);

            return (
                <div className="fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-end sm:items-center justify-center fade-in">
                    <div className="bg-theme-base w-full max-w-md h-[85vh] sm:h-[650px] sm:rounded-3xl rounded-t-3xl shadow-2xl flex flex-col overflow-hidden animate-slide-up">
                        <div className="p-4 border-b border-theme-muted flex justify-between items-center bg-white shrink-0">
                            <h3 className="font-serif text-lg text-theme-text font-bold text-center w-full">{title}</h3>
                            <button onClick={onClose} className="absolute right-4 p-2 rounded-full hover:bg-theme-text/5 text-theme-text/50">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6"><path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                            </button>
                        </div>
                        {/* Tabs - Distinct Background */}
                        <div className="flex flex-wrap gap-2 p-3 border-b border-theme-muted bg-theme-muted/20 shrink-0 justify-center">
                            {tabs.map(t => (
                                <button key={t} onClick={() => setActiveTab(t)} className={`px-3 py-2 rounded-lg text-xs font-bold transition-all shadow-sm ${activeTab === t ? 'bg-theme-primary text-white ring-2 ring-theme-primary ring-offset-1' : 'bg-white text-theme-text/70 border border-theme-muted hover:bg-white/80'}`}>
                                    {t}
                                </button>
                            ))}
                        </div>
                        {/* Content */}
                        <div className="flex-1 overflow-y-auto p-4 bg-theme-base scroll-smooth">
                            <div className="grid grid-cols-1 gap-2 pb-10">
                                {data[activeTab].map(item => (
                                    <button key={item} onClick={() => onSelect(item)} className="p-4 bg-white rounded-xl text-left text-theme-text shadow-sm hover:bg-theme-secondary/10 hover:text-theme-secondary transition-all active:scale-[0.98] font-medium border border-transparent hover:border-theme-secondary/30">
                                        {item}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ProfileEditor = ({ current, onSave, onCancel }) => {
            const [name, setName] = useState(current?.name || '');
            const [breed, setBreed] = useState(current?.breed || '');
            const [age, setAge] = useState(current?.age ? current.age.toString() + '豁ｳ' : '');
            const [image, setImage] = useState(current?.image || null);
            const [isProcessing, setIsProcessing] = useState(false); // New: Processing state

            const [isBreedOpen, setIsBreedOpen] = useState(false);
            const [isAgeOpen, setIsAgeOpen] = useState(false);

            // Image Resizer Helper
            const resizeImage = (file) => {
                return new Promise((resolve) => {
                    const MAX_WIDTH = 600;
                    const MAX_HEIGHT = 600;
                    const reader = new FileReader();
                    reader.readAsDataURL(file);
                    reader.onload = (event) => {
                        const img = new Image();
                        img.src = event.target.result;
                        img.onload = () => {
                            let width = img.width;
                            let height = img.height;

                            if (width > height) {
                                if (width > MAX_WIDTH) {
                                    height *= MAX_WIDTH / width;
                                    width = MAX_WIDTH;
                                }
                            } else {
                                if (height > MAX_HEIGHT) {
                                    width *= MAX_HEIGHT / height;
                                    height = MAX_HEIGHT;
                                }
                            }

                            const canvas = document.createElement('canvas');
                            canvas.width = width;
                            canvas.height = height;
                            const ctx = canvas.getContext('2d');
                            ctx.drawImage(img, 0, 0, width, height);
                            // Compress to JPEG 0.8
                            const dataUrl = canvas.toDataURL('image/jpeg', 0.8);
                            resolve(dataUrl);
                        };
                    };
                });
            };

            const handleImageConfig = async (e) => {
                const file = e.target.files[0];
                if (file) {
                    setIsProcessing(true);
                    try {
                        const resizedDataUrl = await resizeImage(file);
                        setImage(resizedDataUrl);
                    } catch (error) {
                        console.error("Image resize error:", error);
                        alert("逕ｻ蜒上・蜃ｦ逅・↓螟ｱ謨励＠縺ｾ縺励◆");
                    } finally {
                        setIsProcessing(false);
                    }
                }
            };

            const handleAgeSelect = (val) => {
                setAge(val);
                setIsAgeOpen(false);
            };

            const handleBreedSelect = (val) => {
                setBreed(val);
                setIsBreedOpen(false);
            };

            return (
                <div className="fade-in pt-4">
                    <TabbedModal isOpen={isBreedOpen} onClose={() => setIsBreedOpen(false)} title="迥ｬ遞ｮ繧帝∈謚・ data={BREEDS_DATA} onSelect={handleBreedSelect} />
                    <TabbedModal isOpen={isAgeOpen} onClose={() => setIsAgeOpen(false)} title="蟷ｴ鮨｢繧帝∈謚・ data={AGE_DATA} onSelect={handleAgeSelect} />

                    <div className="text-center mb-6">
                        <h2 className="font-serif text-xl text-theme-text mb-2">My Partner</h2>
                        <p className="text-xs text-theme-text/60">諢帷堪縺ｮ諠・ｱ繧堤匳骭ｲ繝ｻ邱ｨ髮・＠縺ｾ縺・/p>
                    </div>

                    <div className="flex flex-col gap-6">
                        {/* Image Upload */}
                        <div className="flex justify-center">
                            <label className="relative w-28 h-28 rounded-full bg-theme-muted border-2 border-theme-muted overflow-hidden flex items-center justify-center cursor-pointer shadow-inner group">
                                {image ? <img src={image} className="w-full h-full object-cover" /> : <IconPaw />}
                                <div className="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                                    <span className="text-[10px] text-white font-bold bg-black/50 px-2 py-1 rounded">CHANGE</span>
                                </div>
                                <input type="file" accept="image/*" className="hidden" onChange={handleImageConfig} />
                            </label>
                        </div>

                        {/* Fields */}
                        <div className="space-y-4">
                            <div>
                                <label className="block text-xs font-bold text-theme-text/50 mb-1 tracking-widest uppercase">Name</label>
                                <input type="text" value={name} onChange={e => setName(e.target.value)} placeholder="縺雁錐蜑・ className="w-full p-4 rounded-xl bg-white border border-theme-muted outline-none focus:border-theme-primary transition-colors text-theme-text" />
                            </div>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-xs font-bold text-theme-text/50 mb-1 tracking-widest uppercase">Breed</label>
                                    <button onClick={() => setIsBreedOpen(true)} className={`w-full p-4 rounded-xl border outline-none transition-colors text-left flex justify-between items-center ${breed ? 'bg-white border-theme-muted text-theme-text' : 'bg-white border-theme-muted text-theme-text/40'}`}>
                                        <span className="truncate">{breed || "迥ｬ遞ｮ繧帝∈謚・}</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-4 h-4 opacity-50"><path strokeLinecap="round" strokeLinejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /></svg>
                                    </button>
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-theme-text/50 mb-1 tracking-widest uppercase">Age</label>
                                    <button onClick={() => setIsAgeOpen(true)} className={`w-full p-4 rounded-xl border outline-none transition-colors text-left flex justify-between items-center ${age ? 'bg-white border-theme-muted text-theme-text' : 'bg-white border-theme-muted text-theme-text/40'}`}>
                                        <span className="truncate">{age || "蟷ｴ鮨｢"}</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-4 h-4 opacity-50"><path strokeLinecap="round" strokeLinejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /></svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        {/* Actions */}
                        <button onClick={() => !isProcessing && onSave({ name, breed, age: parseInt(age) || 0, image })} disabled={isProcessing} className={`w-full py-4 text-white rounded-xl shadow-lg transition-all font-serif tracking-widest mt-4 ${isProcessing ? 'bg-gray-400 cursor-wait' : 'bg-theme-primary hover:brightness-110'}`}>
                            {isProcessing ? "PROCESSING..." : "SAVE PROFILE"}
                        </button>
                        <button onClick={onCancel} className="w-full py-3 text-theme-text/50 text-xs tracking-widest hover:text-theme-text transition-colors">
                            CANCEL
                        </button>
                    </div>
                </div>
            );
        };

        const HomeMenu = ({ onNavigate, profile, hasDiagnosis, onEditProfile }) => (
            <div className="flex flex-col gap-6 fade-in">
                {/* Profile Header simulated in Menu */}
                <div onClick={onEditProfile} className="bg-white p-6 rounded-3xl shadow-sm border border-theme-muted/50 flex items-center gap-4 cursor-pointer hover:shadow-soft transition-all">
                    <div className="w-16 h-16 rounded-full bg-theme-muted overflow-hidden flex-shrink-0 border border-theme-text/5">
                        {profile?.image ? <img src={profile.image} className="w-full h-full object-cover" /> : <div className="w-full h-full flex items-center justify-center text-theme-text/20 scale-150"><IconPaw /></div>}
                    </div>
                    <div className="flex-1">
                        <h2 className="font-serif text-xl text-theme-text">{profile?.name || "No Name"}</h2>
                        <p className="text-xs text-theme-text/50">{profile?.breed ? `${profile.breed} / ${profile.age}豁ｳ` : "繝励Ο繝輔ぅ繝ｼ繝ｫ譛ｪ逋ｻ骭ｲ"}</p>
                    </div>
                    <div className="text-theme-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" /></svg>
                    </div>
                </div>

                <div className="grid grid-cols-2 gap-4">
                    <MenuButton
                        onClick={() => onNavigate('home')}
                        icon={<IconFood />}
                        title="繝輔・繝芽ｨｺ譁ｭ"
                        desc={hasDiagnosis ? "險ｺ譁ｭ邨先棡" : "繧ｫ繝ｳ繧ｿ繝ｳ3蝠・}
                    // accent removed
                    />
                    <MenuButton onClick={() => onNavigate('record')} icon={<IconHealth />} title="繝ｯ繧ｯ繝√Φ險倬鹸" desc="險倬鹸縺ｨ譛滄剞邂｡逅・ />
                    <MenuButton onClick={() => onNavigate('event')} icon={<IconEventNews />} title="繧､繝吶Φ繝・ desc="蜈ｨ蝗ｽ迚・ />
                    <MenuButton onClick={() => onNavigate('lost')} icon={<IconLostFound />} title="霑ｷ蟄先軸遉ｺ譚ｿ" desc="諠・ｱ縺ｯ縺薙％縺ｸ・・ />
                </div>
            </div>
        );

        const MenuButton = ({ onClick, icon, title, desc, accent }) => (
            <button onClick={onClick} className={`p-6 rounded-3xl text-center flex flex-col items-center gap-3 transition-all duration-300 active:scale-95 group ${accent ? 'bg-theme-text text-white shadow-lg' : 'bg-white text-theme-text shadow-sm hover:shadow-soft'}`}>
                <div className={`p-3 rounded-full ${accent ? 'bg-white/10' : 'bg-theme-muted/50 text-theme-primary'}`}>
                    {React.cloneElement(icon, { className: `w-8 h-8 ${accent ? 'text-white' : 'text-theme-primary'}` })}
                </div>
                <div>
                    <h3 className="font-serif text-base mb-1">{title}</h3>
                    <p className={`text-[10px] ${accent ? 'text-white/60' : 'text-theme-text/40'}`}>{desc}</p>
                </div>
            </button>
        );

        const NavButton = ({ active, onClick, icon, label }) => (
            <button onClick={onClick} className={`flex flex-col items-center gap-1 w-16 py-2 transition-all duration-500 ${active ? 'text-theme-primary' : 'text-theme-text/30'}`}>
                {icon}
                <span className="text-[10px] font-medium">{label}</span>
            </button>
        );

        // --- DASHBOARD SUB-COMPONENTS (Refined) ---
        const Diagnosis = ({ onResult, onShowAll }) => {
            const [step, setStep] = useState(0);
            const [answers, setAnswers] = useState({});
            // New Selectors
            const [isBreedOpen, setIsBreedOpen] = useState(false);
            const [isAgeOpen, setIsAgeOpen] = useState(false);

            const submit = (key, val) => {
                const next = { ...answers, [key]: val };
                setAnswers(next);
                key === 'concern' ? onResult(next) : setStep(s => s + 1);
            };

            const handleAgeSelect = (valStr) => {
                // Map "5豁ｳ" -> "Adult" tag
                const ageNum = parseInt(valStr);
                let stage = "Adult"; // Default
                if (ageNum <= 1) stage = "Puppy";
                else if (ageNum >= 7) stage = "Senior";

                // Save both specific age and stage
                const next = { ...answers, age: stage, ageSpecific: valStr };
                setAnswers(next);
                setStep(s => s + 1);
                setIsAgeOpen(false);
            };

            const InlineSelector = ({ data, onSelect }) => {
                const isArray = Array.isArray(data);
                const tabs = isArray ? [] : Object.keys(data);
                const [activeTab, setActiveTab] = useState(isArray ? null : tabs[0]);

                const items = isArray ? data : data[activeTab];

                return (
                    <div className="bg-white rounded-3xl shadow-soft overflow-hidden border border-theme-muted/20">
                        {/* Tabs (Only if not array) */}
                        {!isArray && (
                            <div className="flex flex-wrap gap-2 p-4 bg-theme-muted/10 border-b border-theme-muted/20 justify-center">
                                {tabs.map(t => (
                                    <button key={t} onClick={() => setActiveTab(t)} className={`px-3 py-2 rounded-lg text-xs font-bold transition-all shadow-sm ${activeTab === t ? 'bg-theme-primary text-white ring-2 ring-theme-primary ring-offset-1' : 'bg-white text-theme-text/70 border border-theme-muted hover:bg-white/80'}`}>
                                        {t}
                                    </button>
                                ))}
                            </div>
                        )}
                        {/* Content List */}
                        <div className="h-80 overflow-y-auto p-2 scroll-smooth bg-theme-base/30">
                            <div className="grid grid-cols-1 gap-2">
                                {items.map(item => (
                                    <button key={item} onClick={() => onSelect(item)} className="p-4 bg-white rounded-xl text-left text-theme-text shadow-sm hover:bg-theme-secondary/10 hover:text-theme-secondary transition-all active:scale-[0.98] font-medium border border-transparent hover:border-theme-secondary/30 flex justify-between items-center group">
                                        {item}
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 text-theme-muted group-hover:text-theme-secondary opacity-0 group-hover:opacity-100 transition-all"><path strokeLinecap="round" strokeLinejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            };

            const steps = [
                { t: "迥ｬ遞ｮ繧偵♀驕ｸ縺ｳ縺上□縺輔＞", c: <InlineSelector data={BREEDS_DATA} onSelect={(val) => submit('breed', val)} /> },
                { t: "迴ｾ蝨ｨ縺ｮ蟷ｴ鮨｢縺ｯ・・, c: <InlineSelector data={AGE_DATA} onSelect={handleAgeSelect} /> },
                // Changed title for multiple selection
                { t: "豌励↓縺ｪ繧九％縺ｨ縺ｯ縺ゅｊ縺ｾ縺吶°・・(隍・焚驕ｸ謚槫庄)", c: <ConcernSelector submit={(val) => submit('concern', val)} /> },
            ];

            return (
                <div className="h-full flex flex-col pt-4 fade-in relative pb-20">
                    <div className="text-center mb-6">
                        <h1 className="font-serif text-2xl md:text-3xl text-theme-text mb-4">諢帷堪縺ｫ繝斐ャ繧ｿ繝ｪ縺ｮ荳逧ｿ繧・/h1>
                        <div className="mb-6 bg-white/50 inline-block px-4 py-2 rounded-full border border-theme-muted/50">
                            <p className="text-xs text-theme-text/70 font-sans tracking-wide">3縺､縺ｮ雉ｪ蝠上↓遲斐∴繧九□縺代〒<br />譛譁ｰ縺ｮ莠ｺ豌励ヵ繝ｼ繝峨ｒ閾ｪ蜍輔〒繝√Ι繧､繧ｹ縺励∪縺・/p>
                        </div>
                        <h2 className="text-xl font-serif text-theme-text border-b-2 border-theme-primary/20 inline-block pb-1 px-4">{steps[step].t}</h2>
                    </div>
                    {steps[step].c}

                    {/* Static Footer Link */}
                    <div className="mt-12 px-2 pb-8 z-30 max-w-md mx-auto w-full">
                        <button onClick={onShowAll} className="w-full bg-gradient-to-r from-amber-300 via-orange-400 to-amber-300 text-white py-5 rounded-xl font-serif font-bold tracking-widest shadow-lg hover:shadow-xl transition-all transform active:scale-95 animate-shimmer bg-[length:200%_100%] flex items-center justify-center gap-2 relative overflow-hidden group">
                            <span className="relative z-10 flex items-center gap-2 text-lg drop-shadow-sm">
                                2026蟷ｴ譛譁ｰ繝励Ξ繝溘い繝繝輔・繝我ｸ隕ｧ
                            </span>
                            <div className="absolute inset-0 bg-white/20 group-hover:bg-transparent transition-colors"></div>
                        </button>
                    </div>
                </div>
            );
        };

        const ConcernSelector = ({ submit }) => {
            const [selected, setSelected] = useState([]);

            const toggle = (val) => {
                setSelected(prev => {
                    if (prev.includes(val)) return prev.filter(v => v !== val);
                    return [...prev, val];
                });
            };

            // Options: Added 'cost'
            const options = [
                { l: "Tear Burn", jp: "豸吶ｄ縺・, v: 'tear_burn', icon: <IconEye /> },
                { l: "Coat", jp: "豈帑ｸｦ縺ｿ", v: 'coat', icon: <IconCoat /> },
                { l: "Joints", jp: "髢｢遽", v: 'joints', icon: <IconBone /> },
                { l: "Weight", jp: "菴馴㍾邂｡逅・, v: 'obesity', icon: <IconWeight /> },
                { l: "Appetite", jp: "鬟溘＞縺､縺・, v: 'appetite', icon: <IconBowl /> },
                { l: "Teeth", jp: "豁ｯ縺ｮ繧ｱ繧｢", v: 'teeth', icon: <IconPaw /> },
                { l: "Odor", jp: "蜿｣閾ｭ繝ｻ繝九が繧､", v: 'odor', icon: <IconSparkles /> },
                { l: "Cost", jp: "繧ｳ繧ｹ繝・, v: 'cost', icon: <span className="text-2xl font-serif">ﾂ･</span> } // New
            ];

            return (
                <div className="flex flex-col gap-4">
                    <div className="grid grid-cols-2 gap-3">
                        {options.map(o => {
                            const active = selected.includes(o.v);
                            return (
                                <button key={o.v} onClick={() => toggle(o.v)} className={`aspect-square rounded-2xl flex flex-col items-center justify-center gap-2 shadow-sm transition-all active:scale-95 border-2 ${active ? 'bg-theme-primary/10 border-theme-primary' : 'bg-white border-transparent hover:shadow-soft'}`}>
                                    <div className={active ? 'text-theme-primary' : 'text-theme-text/50'}>{o.icon}</div>
                                    <span className={`font-serif ${active ? 'text-theme-primary font-bold' : 'text-theme-text'}`}>{o.jp}</span>
                                    {active && <div className="absolute top-2 right-2 w-3 h-3 bg-theme-primary rounded-full"></div>}
                                </button>
                            );
                        })}
                    </div>
                    <button onClick={() => submit(selected)} className="w-full py-4 bg-theme-text text-white rounded-xl shadow-lg hover:bg-theme-text/90 transition-all font-serif tracking-widest">
                        險ｺ譁ｭ邨先棡繧定ｦ九ｋ
                    </button>
                </div>
            );
        };

        const FoodResults = ({ answers, onReset, onShowAll }) => {
            const results = useMemo(() => {
                if (!answers) return [];
                const userAge = answers.age || 'Adult';
                const userConcerns = answers.concern || []; // Array
                const userBreed = answers.breed || '';
                const userSize = BREED_SIZE_MAP[userBreed] || 'medium'; // Default to medium

                return PRODUCTS
                    .map(p => {
                        let score = 0;

                        // 0. Size Match (Critical Filter)
                        const pSizes = p.tags.targetSizes || ['all'];
                        // If product is specific to a size (not 'all') and doesn't match user's size, exclude it.
                        if (!pSizes.includes('all') && !pSizes.includes(userSize)) {
                            return null;
                        }

                        // 1. Quality/Priority
                        if (p.tags.priority === 'S') score += 50;
                        if (p.tags.priority === 'A') score += 30;
                        if (p.tags.priority === 'B') score += 10;

                        // 2. Age Match
                        const pAge = p.tags.age;
                        let isAgeMatch = false;
                        if (pAge === 'all') isAgeMatch = true;
                        else if (pAge.toLowerCase() === userAge.toLowerCase()) isAgeMatch = true;

                        if (!isAgeMatch) return null;

                        // 3. Concern Match
                        userConcerns.forEach(c => {
                            if (c === 'cost') {
                                if (p.price && p.price !== "ﾂ･隕∫｢ｺ隱・) {
                                    const priceNum = parseInt(p.price.replace(/[^0-9]/g, ''));
                                    if (priceNum < 5000) score += 30;
                                }
                            } else {
                                if (p.tags.concern === c) score += 40;
                                if (p.tags.secondaryConcern.includes(c)) score += 20;
                            }
                        });

                        return { ...p, score };
                    })
                    .filter(Boolean)
                    .sort((a, b) => b.score - a.score)
                    .slice(0, 3);
            }, [answers]);

            return (
                <div className="pb-24 fade-in">
                    {/* Header with Back Button */}
                    <div className="relative mb-6 px-2">
                        <button onClick={onReset} className="absolute left-0 top-1/2 -translate-y-1/2 p-2 bg-white rounded-full shadow-sm text-theme-text/70 hover:text-theme-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" /></svg>
                        </button>
                        <div className="text-center">
                            <p className="font-serif text-lg">縺ゅ↑縺溘∈縺ｮ繝吶せ繝医そ繝ｬ繧ｯ繝・/p>
                            <p className="text-xs text-theme-text/50 font-sans mt-1">
                                {answers.breed} / {answers.age === 'Puppy' ? '蟄千堪' : answers.age === 'Senior' ? '繧ｷ繝九い' : '謌千堪'}
                            </p>
                        </div>
                    </div>

                    <div className="space-y-8">
                        {results.map((p, i) => (
                            <div key={p.id} className="group cursor-pointer" onClick={() => p.link && window.open(p.link, '_blank')}>
                                <div className="relative aspect-[4/3] rounded-2xl overflow-hidden mb-4 shadow-float">
                                    <div className="absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded-full z-10">
                                        <span className="text-[10px] font-bold tracking-widest uppercase text-theme-text">繝槭ャ繝∝ｺｦ No.{i + 1}</span>
                                    </div>
                                    {p.tags.priority === 'S' && (
                                        <div className="absolute top-4 right-4 bg-theme-primary/90 backdrop-blur px-3 py-1 rounded-full z-10 text-white">
                                            <span className="text-[10px] font-bold tracking-widest uppercase">Premium</span>
                                        </div>
                                    )}
                                    <img src={p.img} className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" />
                                </div>
                                <div className="text-center px-2">
                                    <span className="text-[10px] text-theme-primary tracking-widest uppercase block mb-2">{p.feature}</span>
                                    <h3 className="font-serif text-xl text-theme-text mb-2">{p.name}</h3>
                                    <p className="text-sm text-theme-text/60 leading-relaxed mb-3">{p.description}</p>

                                    <button className="w-full bg-theme-text text-white text-xs px-6 py-4 rounded-xl shadow-lg hover:bg-theme-text/90 transition-all uppercase tracking-widest">
                                        蜈ｬ蠑上し繧､繝医ｒ隕九ｋ
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>
                    <button onClick={onShowAll} className="w-full mt-10 bg-gradient-to-r from-amber-300 via-orange-400 to-amber-300 text-white py-5 rounded-xl font-serif font-bold tracking-widest shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 relative overflow-hidden group animate-shimmer bg-[length:200%_100%]">
                        <span className="relative z-10 flex items-center justify-center gap-2 text-lg drop-shadow-sm">
                            2026蟷ｴ譛譁ｰ繝励Ξ繝溘い繝繝輔・繝我ｸ隕ｧ
                        </span>
                        <div className="absolute inset-0 bg-white/20 group-hover:bg-transparent transition-colors"></div>
                    </button>
                    <button onClick={onReset} className="w-full mt-4 text-xs text-theme-text/40 tracking-widest uppercase hover:text-theme-primary transition-colors border-t border-theme-muted/30 pt-4">繧ゅ≧荳蠎ｦ險ｺ譁ｭ縺吶ｋ</button>
                </div>
            );
        };

        const ProductRanking = ({ onBack }) => {
            // Sort by Priority S -> A -> B
            const sorted = useMemo(() => {
                const priorityOrder = { 'S': 3, 'A': 2, 'B': 1 };
                return [...PRODUCTS].sort((a, b) => priorityOrder[b.tags.priority] - priorityOrder[a.tags.priority]);
            }, []);

            return (
                <div className="pb-24 fade-in pt-4">
                    {/* Header with Back Button - Consistent with FoodResults */}
                    <div className="relative mb-8 px-2">
                        <button onClick={onBack} className="absolute left-0 top-1/2 -translate-y-1/2 p-2 bg-white rounded-full shadow-sm text-theme-text/70 hover:text-theme-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" /></svg>
                        </button>
                        <div className="text-center">
                            <h2 className="text-xl font-serif text-theme-text">2026蟷ｴ 譛譁ｰ繧ｳ繝ｬ繧ｯ繧ｷ繝ｧ繝ｳ</h2>
                            <p className="text-[10px] text-theme-text/50 tracking-widest mt-1">蜴ｳ驕ｸ繝励Ξ繝溘い繝繝峨ャ繧ｰ繝輔・繝・/p>
                        </div>
                    </div>

                    <div className="grid grid-cols-2 gap-4">
                        {sorted.map((p) => (
                            <div key={p.id} className="bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all cursor-pointer" onClick={() => p.link && window.open(p.link, '_blank')}>
                                <div className="aspect-square relative">
                                    <img src={p.img} className="w-full h-full object-cover" />
                                    {p.tags.priority === 'S' && <span className="absolute top-2 right-2 bg-theme-primary text-white text-[10px] px-2 py-0.5 rounded-full font-bold">Recommended</span>}
                                </div>
                                <div className="p-3">
                                    <h3 className="font-serif text-sm text-theme-text mb-1 line-clamp-1">{p.name}</h3>
                                    <p className="text-[10px] text-theme-text/50 line-clamp-2">{p.description}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const RecordTab = ({ data, onSave, onBack }) => {
            // data format: {mixedDate, mixedType, rabiesDate, hospitalMemo}
            const safeData = data || {};

            const handleChange = (field, value) => {
                onSave({ ...safeData, [field]: value });
            };

            const getNextDate = (dateStr) => {
                if (!dateStr) return null;
                const d = new Date(dateStr);
                d.setFullYear(d.getFullYear() + 1);
                return d.toLocaleDateString();
            };

            const nextMixed = getNextDate(safeData.mixedDate);
            const nextRabies = getNextDate(safeData.rabiesDate);

            return (
                <div className="fade-in pt-4 pb-20">
                    <div className="relative mb-6 px-2">
                        <button onClick={onBack} className="absolute left-0 top-1/2 -translate-y-1/2 p-2 bg-white rounded-full shadow-sm text-theme-text/70 hover:text-theme-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" /></svg>
                        </button>
                        <div className="text-center">
                            <h2 className="text-xl font-serif text-theme-text">繝ｯ繧ｯ繝√Φ邂｡逅・/h2>
                            <p className="text-[10px] text-theme-text/50 mt-1">螟ｧ蛻・↑險倬鹸繧偵け繝ｩ繧ｦ繝峨↓菫晏ｭ・/p>
                        </div>
                    </div>

                    {/* Mixed Vaccine */}
                    <div className="bg-white p-6 rounded-3xl shadow-sm mb-6 border border-theme-primary/10">
                        <div className="flex items-center gap-3 mb-4">
                            <span className="w-8 h-8 rounded-full bg-theme-primary/10 text-theme-primary flex items-center justify-center">
                                <IconHealth />
                            </span>
                            <h3 className="font-serif text-theme-text font-bold">豺ｷ蜷医Ρ繧ｯ繝√Φ</h3>
                        </div>
                        <div className="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label className="block text-xs font-bold text-theme-text mb-2">謗･遞ｮ譌･</label>
                                <input type="date" value={safeData.mixedDate || ''} onChange={(e) => handleChange('mixedDate', e.target.value)} className="w-full bg-theme-base p-3 rounded-xl text-base text-theme-text outline-none focus:ring-2 focus:ring-theme-primary/20" />
                            </div>
                            <div>
                                <label className="block text-xs font-bold text-theme-text mb-2">遞ｮ鬘・/label>
                                <select value={safeData.mixedType || '5遞ｮ'} onChange={(e) => handleChange('mixedType', e.target.value)} className="w-full bg-theme-base p-3 rounded-xl text-base text-theme-text outline-none focus:ring-2 focus:ring-theme-primary/20">
                                    <option>5遞ｮ</option>
                                    <option>6遞ｮ</option>
                                    <option>7遞ｮ</option>
                                    <option>8遞ｮ</option>
                                    <option>10遞ｮ</option>
                                </select>
                            </div>
                        </div>
                        {nextMixed && (
                            <div className="text-center bg-theme-primary/5 rounded-xl p-3 mt-2">
                                <p className="text-xs text-theme-primary/80 mb-1 font-bold">谺｡蝗槭・莠亥ｮ・/p>
                                <p className="font-serif text-xl text-theme-primary font-bold">{nextMixed}</p>
                            </div>
                        )}
                    </div>

                    {/* Rabies Vaccine */}
                    <div className="bg-white p-6 rounded-3xl shadow-sm mb-6 border border-theme-secondary/10">
                        <div className="flex items-center gap-3 mb-4">
                            <span className="w-8 h-8 rounded-full bg-theme-secondary/10 text-theme-secondary flex items-center justify-center">
                                <IconPaw />
                            </span>
                            <h3 className="font-serif text-theme-text font-bold">迢ら堪逞・Ρ繧ｯ繝√Φ</h3>
                        </div>
                        <div className="mb-4">
                            <label className="block text-xs font-bold text-theme-text mb-2">謗･遞ｮ譌･</label>
                            <input type="date" value={safeData.rabiesDate || ''} onChange={(e) => handleChange('rabiesDate', e.target.value)} className="w-full bg-theme-base p-3 rounded-xl text-base text-theme-text outline-none focus:ring-2 focus:ring-theme-secondary/20" />
                        </div>
                        {nextRabies && (
                            <div className="text-center bg-theme-secondary/5 rounded-xl p-3 mt-2">
                                <p className="text-xs text-theme-secondary/80 mb-1 font-bold">谺｡蝗槭・莠亥ｮ・/p>
                                <p className="font-serif text-xl text-theme-secondary font-bold">{nextRabies}</p>
                            </div>
                        )}
                    </div>

                    {/* Hospital Memo */}
                    <div className="bg-white p-6 rounded-3xl shadow-sm border border-theme-muted">
                        <label className="block text-xs font-bold text-theme-text mb-2">縺九°繧翫▽縺醍羅髯｢繝｡繝｢</label>
                        <textarea
                            value={safeData.hospitalMemo || ''}
                            onChange={(e) => handleChange('hospitalMemo', e.target.value)}
                            placeholder="逞・劼蜷阪ｄ菴乗園縲∬ｨｺ蟇溷虻逡ｪ蜿ｷ縺ｪ縺ｩ..."
                            className="w-full h-24 bg-theme-base p-3 rounded-xl text-sm text-theme-text resize-none outline-none focus:ring-2 focus:ring-theme-muted/50"
                        ></textarea>
                    </div>
                </div>
            );
        };

        const EventsTab = ({ onBack }) => {
            const sortedEvents = useMemo(() => {
                const parseDate = (dStr) => {
                    const match = dStr.match(/(\d+)譛・\d+)譌･/);
                    if (!match) return 9999;
                    return parseInt(match[1]) * 100 + parseInt(match[2]);
                };
                return [...EVENTS_DATA].sort((a, b) => parseDate(a.date) - parseDate(b.date));
            }, []);

            return (
                <div className="fade-in pt-4 pb-20">
                    <div className="relative mb-6 px-2">
                        <button onClick={onBack} className="absolute left-0 top-1/2 -translate-y-1/2 p-2 bg-white rounded-full shadow-sm text-theme-text/70 hover:text-theme-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" /></svg>
                        </button>
                        <div className="text-center">
                            <h2 className="text-xl font-serif text-theme-text">繧､繝吶Φ繝域ュ蝣ｱ</h2>
                            <p className="text-[10px] text-theme-text/50 mt-1">騾ｱ譛ｫ縺ｮ縺雁・縺九￠繝ｻ繧､繝吶Φ繝域､懃ｴ｢</p>
                        </div>
                    </div>
                    <div className="space-y-4">
                        {sortedEvents.map((e, i) => {
                            // Extract prefecture and simplify
                            let prefecture = e.place.split(' ')[0] || "髢｢譚ｱ";
                            // Remove suffixes
                            prefecture = prefecture.replace(/(驛ｽ|蠎忿逵・$/, '');

                            return (
                                <div key={i} className="bg-white rounded-2xl p-4 shadow-sm flex gap-5 items-center hover:shadow-md transition-shadow cursor-pointer">
                                    <div className="w-20 h-20 rounded-xl bg-theme-muted/30 flex items-center justify-center flex-shrink-0 border border-theme-muted">
                                        <span className="font-serif text-lg text-theme-text font-medium writing-vertical-rl tracking-widest leading-none h-12">
                                            {prefecture}
                                        </span>
                                    </div>

                                    <div className="flex-1 min-w-0">
                                        <span className="text-[10px] font-bold tracking-wider text-theme-primary/80 uppercase mb-1 block">{e.date}</span>
                                        <h3 className="font-serif text-lg text-theme-text mb-2 leading-tight">{e.title}</h3>
                                        <div className="flex items-center gap-2 text-xs text-theme-text/50 font-sans truncate">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" className="w-3 h-3 flex-shrink-0">
                                                <path fillRule="evenodd" d="M9.69 18.933l.003.001C9.89 19.02 10 19 10 19s.11.02.308-.066l.002-.001.006-.003.018-.008a5.741 5.741 0 00.281-.14c.186-.096.446-.24.757-.433.62-.384 1.445-.966 2.274-1.765C15.302 14.988 17 12.493 17 9A7 7 0 103 9c0 3.492 1.698 5.988 3.355 7.584a13.731 13.731 0 002.273 1.765 11.842 11.842 0 00.976.544l.062.029.018.008.006.003zM10 11.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" clipRule="evenodd" />
                                            </svg>
                                            {e.place}
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                    {/* Disclaimer */}
                    <div className="mt-8 text-center px-4">
                        <p className="text-[10px] text-theme-text/40 leading-relaxed">
                            窶ｻ謗ｲ霈峨＆繧後※縺・ｋ繧､繝吶Φ繝域ュ蝣ｱ縺ｯ繧､繝ｳ繧ｿ繝ｼ繝阪ャ繝井ｸ翫・諠・ｱ繧貞・縺ｫ縺ｾ縺ｨ繧√※縺・∪縺吶・br />
                            螟ｩ蛟吶ｄ荳ｻ蛯ｬ閠・・驛ｽ蜷医↓繧医ｊ螟画峩縺ｫ縺ｪ繧句ｴ蜷医′縺ゅｊ縺ｾ縺吶・縺ｧ縲・br />
                            譛譁ｰ諠・ｱ縺ｯ蠢・★蜈ｬ蠑上し繧､繝育ｭ峨〒縺碑・霄ｫ縺ｧ縺皮｢ｺ隱阪￥縺縺輔＞縲・                        </p>
                    </div>
                </div>
            );
        };

        const LostTab = ({ onBack }) => {
            return (
                <div className="fade-in pt-4 pb-20">
                    <div className="relative mb-6 px-2">
                        <button onClick={onBack} className="absolute left-0 top-1/2 -translate-y-1/2 p-2 bg-white rounded-full shadow-sm text-theme-text/70 hover:text-theme-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" /></svg>
                        </button>
                        <div className="text-center">
                            <h2 className="text-xl font-serif text-theme-text">霑ｷ蟄先軸遉ｺ譚ｿ</h2>
                            <p className="text-[10px] text-theme-text/50 mt-1">蝨ｰ蝓溘・霑ｷ蟄先ュ蝣ｱ繧貞・譛・/p>
                        </div>
                    </div>
                    {LOST_DATA.length > 0 ? (
                        <div className="space-y-4">
                            {LOST_DATA.map(d => (
                                <div key={d.id} className="bg-white rounded-2xl p-4 shadow-sm flex gap-4 items-center">
                                    <img src={d.img} className="w-12 h-12 rounded-full object-cover" />
                                    <div>
                                        <p className="font-serif text-theme-text">{d.name} <span className="text-xs text-theme-text/50 font-sans ml-2">({d.breed})</span></p>
                                        <p className="text-xs text-theme-text/40 mt-1">桃 {d.place}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    ) : (
                        <div className="bg-white rounded-3xl p-8 text-center shadow-sm border border-theme-muted">
                            <div className="w-16 h-16 bg-theme-muted/20 rounded-full flex items-center justify-center mx-auto mb-4 text-theme-text/50">
                                <IconLostFound />
                            </div>
                            <h3 className="font-serif text-lg text-theme-text mb-2">迴ｾ蝨ｨ縲∬ｿｷ蟄先ュ蝣ｱ縺ｯ縺ゅｊ縺ｾ縺帙ｓ</h3>
                            <p className="text-xs text-theme-text/60 leading-relaxed">
                                莉倩ｿ代〒霑ｷ蟄舌・逶ｮ謦・ュ蝣ｱ縺後≠縺｣縺溷ｴ蜷医・br />縺薙■繧峨↓陦ｨ遉ｺ縺輔ｌ縺ｾ縺吶・                            </p>
                            <button className="mt-6 w-full py-3 bg-theme-base text-theme-text/70 rounded-xl text-xs font-bold tracking-widest hover:bg-theme-secondary/10 hover:text-theme-secondary transition-colors">
                                諠・ｱ繧呈兜遞ｿ縺吶ｋ
                            </button>
                        </div>
                    )}
                </div>
            );
        };


        // --- MAIN ENTRY POINT ---
        const App = () => {
            const [user, setUser] = useState(null); // Auth User Object
            const [isLoading, setIsLoading] = useState(true); // Initial Check

            // Auth Persistence Logic
            useEffect(() => {
                if (typeof firebase === 'undefined') return;

                // Infinite persistence (default in Firebase w/ CDN, but explicit here doesn't hurt)
                // firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);

                const unsubscribe = firebase.auth().onAuthStateChanged((u) => {
                    setUser(u); // If logged in, u object exists. If not, null.
                    setIsLoading(false); // Auth check done
                });
                return () => unsubscribe();
            }, []);

            const handleLogin = () => {
                if (typeof firebase === 'undefined') {
                    alert("Firebase SDK not loaded. Check internet connection.");
                    return;
                }
                const auth = firebase.auth();
                const provider = new firebase.auth.GoogleAuthProvider();

                auth.signInWithPopup(provider).catch((error) => {
                    console.error("Login failed", error);
                    alert(`Login Failed: ${error.message}`);
                });
            };

            const handleLogout = () => {
                firebase.auth().signOut();
            };

            if (isLoading) {
                return (
                    <div className="w-full max-w-md mx-auto min-h-screen bg-theme-base flex items-center justify-center">
                        <div className="animate-pulse text-theme-primary font-serif">Loading PePre...</div>
                    </div>
                );
            }

            return (
                <div className="w-full max-w-md mx-auto shadow-2xl min-h-screen bg-theme-base overflow-hidden relative">
                    {user ? <Dashboard user={user} onLogout={handleLogout} /> : <LandingPage onLogin={handleLogin} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>
